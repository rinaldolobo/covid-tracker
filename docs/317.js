"use strict";(self.webpackChunkcovid_tracker=self.webpackChunkcovid_tracker||[]).push([[317],{7317:(Ne,Ut,O)=>{O.r(Ut),O.d(Ut,{Graticule:()=>di,GraticuleSeries:()=>ue,GraticuleSeriesDataItem:()=>vi,HeatLegend:()=>nt.T,Legend:()=>F.De,LegendDataItem:()=>F.UQ,LegendSettings:()=>F.BZ,MapArc:()=>yi,MapArcSeries:()=>Ur,MapArcSeriesDataItem:()=>Si,MapChart:()=>Xr,MapChartDataItem:()=>Ea,MapImage:()=>de,MapImageSeries:()=>hn,MapImageSeriesDataItem:()=>pi,MapLine:()=>oe,MapLineObject:()=>ln,MapLineSeries:()=>Ce,MapLineSeriesDataItem:()=>ae,MapObject:()=>pe,MapPolygon:()=>Qe,MapPolygonSeries:()=>Bn,MapPolygonSeriesDataItem:()=>Zn,MapSeries:()=>Jt,MapSeriesDataItem:()=>$t,MapSpline:()=>mi,MapSplineSeries:()=>Qr,MapSplineSeriesDataItem:()=>Pi,Projection:()=>dt,SmallMap:()=>hi,ZoomControl:()=>Kr,d3geo:()=>Dt,geo:()=>Ct,getBackground:()=>hr,getCircle:()=>Wo,multiGeoLineToMultiLine:()=>Xe,multiGeoPolygonToMultipolygon:()=>_n,multiGeoToPoint:()=>Fn,multiLineToGeo:()=>Vn,multiPointToGeo:()=>ke,multiPolygonToGeo:()=>Bo,pointToGeo:()=>Ye,projections:()=>Ft});var Ct={};O.r(Ct),O.d(Ct,{geoToPoint:()=>La,normalizeMultiline:()=>Hr,normalizePoint:()=>Wr,wrapAngleTo180:()=>we});var Ft={};O.r(Ft),O.d(Ft,{Albers:()=>ho,AlbersUsa:()=>fo,AzimuthalEqualArea:()=>mo,Eckert6:()=>io,EqualEarth:()=>Po,Mercator:()=>Jr,Miller:()=>eo,NaturalEarth1:()=>go,Orthographic:()=>ao,Projection:()=>dt,Stereographic:()=>uo});var Dt={};O.r(Dt),O.d(Dt,{geoAlbers:()=>Ti,geoAlbersUsa:()=>co,geoArea:()=>Qi,geoAzimuthalEqualArea:()=>vo,geoAzimuthalEqualAreaRaw:()=>Di,geoAzimuthalEquidistant:()=>qa,geoAzimuthalEquidistantRaw:()=>Ni,geoBounds:()=>Rn,geoCentroid:()=>Xa,geoCircle:()=>ur,geoClipAntimeridian:()=>Hn,geoClipCircle:()=>mr,geoClipExtent:()=>Qa,geoClipRectangle:()=>$e,geoConicConformal:()=>$a,geoConicConformalRaw:()=>Go,geoConicEqualArea:()=>pn,geoConicEqualAreaRaw:()=>lo,geoConicEquidistant:()=>Ja,geoConicEquidistantRaw:()=>jo,geoContains:()=>Ka,geoDistance:()=>xe,geoEqualEarth:()=>yo,geoEqualEarthRaw:()=>Gi,geoEquirectangular:()=>Mr,geoEquirectangularRaw:()=>Pe,geoGnomonic:()=>ts,geoGnomonicRaw:()=>Ai,geoGraticule:()=>gi,geoGraticule10:()=>Ca,geoIdentity:()=>es,geoInterpolate:()=>_r,geoLength:()=>Zr,geoMercator:()=>qr,geoMercatorRaw:()=>Ee,geoNaturalEarth1:()=>po,geoNaturalEarth1Raw:()=>Ii,geoOrthographic:()=>oo,geoOrthographicRaw:()=>wi,geoPath:()=>Fr,geoProjection:()=>Mt,geoProjectionMutator:()=>Kn,geoRotation:()=>or,geoStereographic:()=>so,geoStereographicRaw:()=>Ci,geoStream:()=>Lt,geoTransform:()=>qo,geoTransverseMercator:()=>ns,geoTransverseMercatorRaw:()=>Vi});var F=O(2900),nt=O(6324),j=O(4762),Gt=O(6161),N=O(5700),_=O(3658),tt=O(9901),C=O(7943),S=O(5784),T=O(6920);class A{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=t[r],a=e+o,s=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);s&&(t[i++]=s),e=a}return t[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let i,r,o,t=this._n,a=0;if(t>0){for(a=e[--t];t>0&&(i=a,r=e[--t],a=i+r,o=r-(a-i),!o););t>0&&(o<0&&e[t-1]<0||o>0&&e[t-1]>0)&&(r=2*o,i=a+r,r==i-a&&(a=i))}return a}}var w=1e-6,it=1e-12,G=Math.PI,V=G/2,Bt=G/4,Q=2*G,B=180/G,I=G/180,R=Math.abs,jt=Math.atan,rt=Math.atan2,L=Math.cos,Wt=Math.ceil,Fi=Math.exp,wn=(Math,Math.hypot),Ae=Math.log,Cn=Math.pow,x=Math.sin,St=Math.sign||function(n){return n>0?1:n<0?-1:0},ot=Math.sqrt,En=Math.tan;function _i(n){return n>1?0:n<-1?G:Math.acos(n)}function lt(n){return n>1?V:n<-1?-V:Math.asin(n)}function Zi(n){return(n=x(n/2))*n}function K(){}function Ve(n,e){n&&Wi.hasOwnProperty(n.type)&&Wi[n.type](n,e)}var Bi={Feature:function(n,e){Ve(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,r=t.length;++i<r;)Ve(t[i].geometry,e)}},Wi={Sphere:function(n,e){e.sphere()},Point:function(n,e){e.point((n=n.coordinates)[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)e.point((n=t[i])[0],n[1],n[2])},LineString:function(n,e){Tn(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)Tn(t[i],e,0)},Polygon:function(n,e){Hi(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)Hi(t[i],e)},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,r=t.length;++i<r;)Ve(t[i],e)}};function Tn(n,e,t){var o,i=-1,r=n.length-t;for(e.lineStart();++i<r;)e.point((o=n[i])[0],o[1],o[2]);e.lineEnd()}function Hi(n,e){var t=-1,i=n.length;for(e.polygonStart();++t<i;)Tn(n[t],e,1);e.polygonEnd()}function Lt(n,e){n&&Bi.hasOwnProperty(n.type)?Bi[n.type](n,e):Ve(n,e)}var ki,Yi,In,Dn,Gn,Fe=new A,_e=new A,Et={point:K,lineStart:K,lineEnd:K,polygonStart:function(){Fe=new A,Et.lineStart=Oo,Et.lineEnd=Ro},polygonEnd:function(){var n=+Fe;_e.add(n<0?Q+n:n),this.lineStart=this.lineEnd=this.point=K},sphere:function(){_e.add(Q)}};function Oo(){Et.point=zo}function Ro(){Xi(ki,Yi)}function zo(n,e){Et.point=Xi,ki=n,Yi=e,In=n*=I,Dn=L(e=(e*=I)/2+Bt),Gn=x(e)}function Xi(n,e){var t=(n*=I)-In,i=t>=0?1:-1,r=i*t,o=L(e=(e*=I)/2+Bt),a=x(e),s=Gn*a,l=Dn*o+s*L(r),h=s*i*x(r);Fe.add(rt(h,l)),In=n,Dn=o,Gn=a}function Qi(n){return _e=new A,Lt(n,Et),2*_e}function Ze(n){return[rt(n[1],n[0]),lt(n[2])]}function Ht(n){var e=n[0],t=n[1],i=L(t);return[i*L(e),i*x(e),x(t)]}function Be(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function Kt(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function jn(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function We(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function He(n){var e=ot(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}var q,pt,J,mt,kt,Ui,Ki,qt,fe,_t,Ot,Rt={point:On,lineStart:$i,lineEnd:Ji,polygonStart:function(){Rt.point=tr,Rt.lineStart=No,Rt.lineEnd=Ao,fe=new A,Et.polygonStart()},polygonEnd:function(){Et.polygonEnd(),Rt.point=On,Rt.lineStart=$i,Rt.lineEnd=Ji,Fe<0?(q=-(J=180),pt=-(mt=90)):fe>w?mt=90:fe<-w&&(pt=-90),Ot[0]=q,Ot[1]=J},sphere:function(){q=-(J=180),pt=-(mt=90)}};function On(n,e){_t.push(Ot=[q=n,J=n]),e<pt&&(pt=e),e>mt&&(mt=e)}function qi(n,e){var t=Ht([n*I,e*I]);if(qt){var i=Kt(qt,t),o=Kt([i[1],-i[0],0],i);He(o),o=Ze(o);var h,a=n-kt,s=a>0?1:-1,l=o[0]*B*s,u=R(a)>180;u^(s*kt<l&&l<s*n)?(h=o[1]*B)>mt&&(mt=h):u^(s*kt<(l=(l+360)%360-180)&&l<s*n)?(h=-o[1]*B)<pt&&(pt=h):(e<pt&&(pt=e),e>mt&&(mt=e)),u?n<kt?yt(q,n)>yt(q,J)&&(J=n):yt(n,J)>yt(q,J)&&(q=n):J>=q?(n<q&&(q=n),n>J&&(J=n)):n>kt?yt(q,n)>yt(q,J)&&(J=n):yt(n,J)>yt(q,J)&&(q=n)}else _t.push(Ot=[q=n,J=n]);e<pt&&(pt=e),e>mt&&(mt=e),qt=t,kt=n}function $i(){Rt.point=qi}function Ji(){Ot[0]=q,Ot[1]=J,Rt.point=On,qt=null}function tr(n,e){if(qt){var t=n-kt;fe.add(R(t)>180?t+(t>0?360:-360):t)}else Ui=n,Ki=e;Et.point(n,e),qi(n,e)}function No(){Et.lineStart()}function Ao(){tr(Ui,Ki),Et.lineEnd(),R(fe)>w&&(q=-(J=180)),Ot[0]=q,Ot[1]=J,qt=null}function yt(n,e){return(e-=n)<0?e+360:e}function Vo(n,e){return n[0]-e[0]}function er(n,e){return n[0]<=n[1]?n[0]<=e&&e<=n[1]:e<n[0]||n[1]<e}function Rn(n){var e,t,i,r,o,a,s;if(mt=J=-(q=pt=1/0),_t=[],Lt(n,Rt),t=_t.length){for(_t.sort(Vo),e=1,o=[i=_t[0]];e<t;++e)er(i,(r=_t[e])[0])||er(i,r[1])?(yt(i[0],r[1])>yt(i[0],i[1])&&(i[1]=r[1]),yt(r[0],i[1])>yt(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(a=-1/0,e=0,i=o[t=o.length-1];e<=t;i=r,++e)(s=yt(i[1],(r=o[e])[0]))>a&&(a=s,q=r[0],J=i[1])}return _t=Ot=null,q===1/0||pt===1/0?[[NaN,NaN],[NaN,NaN]]:[[q,pt],[J,mt]]}var $t=function(n){function e(){var t=n.call(this)||this;return t.className="MapSeriesDataItem",t.values.value={},t.applyTheme(),t}return(0,j.ZT)(e,n),Object.defineProperty(e.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomLevel",{get:function(){return this.properties.zoomLevel},set:function(t){this.setProperty("zoomLevel",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomGeoPoint",{get:function(){return this.properties.zoomGeoPoint},set:function(t){this.setProperty("zoomGeoPoint",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"east",{get:function(){return this._east},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"west",{get:function(){return this._west},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"south",{get:function(){return this._south},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"north",{get:function(){return this._north},enumerable:!0,configurable:!0}),e.prototype.updateExtremes=function(){var t=this.getFeature().geometry;if(t){var i=Rn(t),r=i[0][0],o=i[0][1],a=i[1][1],s=i[1][0],l=!1;a!=this.north&&(this._north=T.round(a,6),l=!0),o!=this.south&&(this._south=T.round(o,6),l=!0),s!=this.east&&(this._east=T.round(s,6),l=!0),r!=this.west&&(this._west=T.round(r,6),l=!0),this._east<this._west&&(this._east=180,this._west=-180),l&&this.component.invalidateDataItems()}},e.prototype.getFeature=function(){return{}},e}(tt.m),Jt=function(n){function e(){var t=n.call(this)||this;return t.className="MapSeries",t.isMeasured=!1,t.nonScalingStroke=!0,t.dataFields.value="value",t.ignoreBounds=!1,t.tooltip&&(t.tooltip.showInViewport=!0),t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.createDataItem=function(){return new $t},e.prototype.checkInclude=function(t,i,r){if(t){if(0==t.length)return!1;if(-1==t.indexOf(r))return!1}return!(i&&i.length>0&&-1!=i.indexOf(r))},Object.defineProperty(e.prototype,"useGeodata",{get:function(){return this.getPropertyValue("useGeodata")},set:function(t){this.setPropertyValue("useGeodata",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"include",{get:function(){return this.getPropertyValue("include")},set:function(t){this.setPropertyValue("include",t)&&this.processIncExc()},enumerable:!0,configurable:!0}),e.prototype.processIncExc=function(){this.invalidateData()},Object.defineProperty(e.prototype,"ignoreBounds",{get:function(){return this.getPropertyValue("ignoreBounds")},set:function(t){this.setPropertyValue("ignoreBounds",t)&&this.chart&&this.chart.updateExtremes()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exclude",{get:function(){return this.getPropertyValue("exclude")},set:function(t){this.setPropertyValue("exclude",t)&&this.processIncExc()},enumerable:!0,configurable:!0}),e.prototype.handleObjectAdded=function(t){var i=t.newValue;i.parent=this,i.series=this,i.strokeWidth=i.strokeWidth},Object.defineProperty(e.prototype,"geodata",{get:function(){return this._geodata},set:function(t){if(t!=this._geodata){this._geodata=t,this.reverseGeodata&&this.chart.processReverseGeodata(this._geodata);for(var i=this.data.length-1;i>=0;i--)1==this.data[i].madeFromGeoData&&this.data.splice(i,1);this.disposeData(),this.invalidateData()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverseGeodata",{get:function(){return this.getPropertyValue("reverseGeodata")},set:function(t){this.setPropertyValue("reverseGeodata",t)&&this._geodata&&this.chart.processReverseGeodata(this._geodata)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geodataSource",{get:function(){return this._dataSources.geodata||this.getDataSource("geodata"),this._dataSources.geodata},set:function(t){var i=this;this._dataSources.geodata&&this.removeDispose(this._dataSources.geodata),this._dataSources.geodata=t,this._dataSources.geodata.component=this,this.events.on("inited",function(){i.loadData("geodata")},void 0,!1),this.setDataSourceEvents(t,"geodata")},enumerable:!0,configurable:!0}),e.prototype.getFeatures=function(){},e.prototype.validateDataItems=function(){n.prototype.validateDataItems.call(this),this.updateExtremes()},e.prototype.updateExtremes=function(){var t,i,r,o;this.dataItems.each(function(a){(a.north>t||!S.isNumber(t))&&(t=a.north),(a.south<i||!S.isNumber(i))&&(i=a.south),(a.west<o||!S.isNumber(o))&&(o=a.west),(a.east>r||!S.isNumber(r))&&(r=a.east)}),this._mapObjects&&this._mapObjects.each(function(a){(a.north>t||!S.isNumber(t))&&(t=a.north),(a.south<i||!S.isNumber(i))&&(i=a.south),(a.west<o||!S.isNumber(o))&&(o=a.west),(a.east>r||!S.isNumber(r))&&(r=a.east)}),(this.north!=t||this.east!=r||this.south!=i||this.west!=o)&&(this._north=t,this._east=r,this._west=o,this._south=i,this.dispatch("geoBoundsChanged"),this.ignoreBounds||this.chart.updateExtremes())},Object.defineProperty(e.prototype,"north",{get:function(){return S.isNumber(this._northDefined)?this._northDefined:this._north},set:function(t){this._northDefined=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"south",{get:function(){return S.isNumber(this._southDefined)?this._southDefined:this._south},set:function(t){this._southDefined=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"west",{get:function(){return S.isNumber(this._westDefined)?this._westDefined:this._west},set:function(t){this._westDefined=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"east",{get:function(){return S.isNumber(this._eastDefined)?this._eastDefined:this._east},set:function(t){this._eastDefined=t},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(t){if(S.hasValue(t.geodata)&&S.isString(t.geodata)){var i=t.geodata;if(S.hasValue(window["am4geodata_"+t.geodata]))t.geodata=window["am4geodata_"+t.geodata];else try{t.geodata=JSON.parse(t.geodata)}catch(r){throw Error("MapChart error: Geodata `"+i+"` is not loaded or is incorrect.")}}n.prototype.processConfig.call(this,t)},e.prototype.asIs=function(t){return"geodata"==t||n.prototype.asIs.call(this,t)},e.prototype.updateTooltipBounds=function(){this.tooltip&&this.topParent&&this.tooltip.setBounds({x:10,y:10,width:this.topParent.maxWidth-20,height:this.topParent.maxHeight-20})},e}(tt.F);C.i.registeredClasses.MapSeries=Jt,C.i.registeredClasses.MapSeriesDataItem=$t;var te=O(6578),pe=function(n){function e(){var t=n.call(this)||this;return t.className="MapObject",t.isMeasured=!1,t.layout="none",t.clickable=!0,t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.validate=function(){this.series&&this.series.itemReaderText&&(this.readerTitle=this.series.itemReaderText),n.prototype.validate.call(this)},e.prototype.updateExtremes=function(){var t=this.getFeature();if(t){var i=t.geometry;if(i){var r=Rn(i),o=r[0][0],a=r[0][1],s=r[1][1],l=r[1][0],h=!1;s!=this.north&&(this._north=T.round(s,8),h=!0),a!=this.south&&(this._south=T.round(a),h=!0),l!=this.east&&(this._east=T.round(l),h=!0),o!=this.west&&(this._west=T.round(o),h=!0),h&&(this.dispatch("geoBoundsChanged"),this.series&&this.series.invalidateDataItems())}}},e.prototype.getFeature=function(){return{}},Object.defineProperty(e.prototype,"east",{get:function(){return S.isNumber(this._east)?this._east:this.dataItem?this.dataItem.east:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"west",{get:function(){return S.isNumber(this._west)?this._west:this.dataItem?this.dataItem.west:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"south",{get:function(){return S.isNumber(this._south)?this._south:this.dataItem?this.dataItem.south:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"north",{get:function(){return S.isNumber(this._north)?this._north:this.dataItem?this.dataItem.north:void 0},enumerable:!0,configurable:!0}),e.prototype.showTooltip=function(t){var i=n.prototype.showTooltip.call(this,t);return i&&"always"==this.showTooltipOn&&!this.series.chart.events.has("mappositionchanged",this.handleTooltipMove,this)&&this.addDisposer(this.series.chart.events.on("mappositionchanged",this.handleTooltipMove,this)),i},e.prototype.handleTooltipMove=function(t){this.tooltip.isHidden||this.showTooltip()},e.prototype.setDataItem=function(t){n.prototype.setDataItem.call(this,t),this.applyAccessibility()},e}(te.W);C.i.registeredClasses.MapObject=pe;var de=function(n){function e(){var t=n.call(this)||this;return t.className="MapImage",t.applyTheme(),t}return(0,j.ZT)(e,n),Object.defineProperty(e.prototype,"latitude",{get:function(){var t=this.getPropertyValue("latitude");return!S.isNumber(t)&&this.dataItem&&this.dataItem.geoPoint&&(t=this.dataItem.geoPoint.latitude),t},set:function(t){this.setPropertyValue("latitude",t,!1,!0),this.updateExtremes()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){var t=this.getPropertyValue("longitude");return!S.isNumber(t)&&this.dataItem&&this.dataItem.geoPoint&&(t=this.dataItem.geoPoint.longitude),t},set:function(t){this.setPropertyValue("longitude",t,!1,!0),this.updateExtremes()},enumerable:!0,configurable:!0}),e.prototype.validatePosition=function(){if(S.isNumber(this.latitude)&&S.isNumber(this.longitude)){var t=this.series.chart.projection.d3Projection([this.longitude,this.latitude]),i=this.series.chart.projection.d3Path({type:"Point",coordinates:[this.longitude,this.latitude]});this.__disabled=!i,this.moveTo({x:t[0],y:t[1]})}n.prototype.validatePosition.call(this)},e.prototype.getFeature=function(){return{type:"Feature",geometry:{type:"Point",coordinates:[this.longitude,this.latitude]}}},e}(pe);C.i.registeredClasses.MapImage=de;var Fo=O(8959),_o=O(7306),Zo=O.n(_o),Pt=O(2027);function ee(n){return function(){return n}}function zn(n,e){function t(i,r){return i=n(i,r),e(i[0],i[1])}return n.invert&&e.invert&&(t.invert=function(i,r){return(i=e.invert(i,r))&&n.invert(i[0],i[1])}),t}function Nn(n,e){return[R(n)>G?n+Math.round(-n/Q)*Q:n,e]}function An(n,e,t){return(n%=Q)?e||t?zn(ir(n),rr(e,t)):ir(n):e||t?rr(e,t):Nn}function nr(n){return function(e,t){return[(e+=n)>G?e-Q:e<-G?e+Q:e,t]}}function ir(n){var e=nr(n);return e.invert=nr(-n),e}function rr(n,e){var t=L(n),i=x(n),r=L(e),o=x(e);function a(s,l){var h=L(l),u=L(s)*h,f=x(s)*h,c=x(l),p=c*t+u*i;return[rt(f*r-p*o,u*t-c*i),lt(p*r+f*o)]}return a.invert=function(s,l){var h=L(l),u=L(s)*h,f=x(s)*h,c=x(l),p=c*r-f*o;return[rt(f*r+c*o,u*t+p*i),lt(p*t-u*i)]},a}function or(n){function e(t){return(t=n(t[0]*I,t[1]*I))[0]*=B,t[1]*=B,t}return n=An(n[0]*I,n[1]*I,n.length>2?n[2]*I:0),e.invert=function(t){return(t=n.invert(t[0]*I,t[1]*I))[0]*=B,t[1]*=B,t},e}function ar(n,e,t,i,r,o){if(t){var a=L(e),s=x(e),l=i*t;null==r?(r=e+i*Q,o=e-l/2):(r=sr(a,r),o=sr(a,o),(i>0?r<o:r>o)&&(r+=i*Q));for(var h,u=r;i>0?u>o:u<o;u-=l)h=Ze([a,-s*L(u),-s*x(u)]),n.point(h[0],h[1])}}function sr(n,e){(e=Ht(e))[0]-=n,He(e);var t=_i(-e[1]);return((-e[2]<0?-t:t)+Q-w)%Q}function ur(){var i,r,n=ee([0,0]),e=ee(90),t=ee(6),o={point:function(l,h){i.push(l=r(l,h)),l[0]*=B,l[1]*=B}};function s(){var l=n.apply(this,arguments),h=e.apply(this,arguments)*I,u=t.apply(this,arguments)*I;return i=[],r=An(-l[0]*I,-l[1]*I,0).invert,ar(o,h,u,1),l={type:"Polygon",coordinates:[i]},i=r=null,l}return s.center=function(l){return arguments.length?(n="function"==typeof l?l:ee([+l[0],+l[1]]),s):n},s.radius=function(l){return arguments.length?(e="function"==typeof l?l:ee(+l),s):e},s.precision=function(l){return arguments.length?(t="function"==typeof l?l:ee(+l),s):t},s}function Bo(n){return Pt.map(n,function(e){var t=e[0],i=e[1],r=[];return t&&r.push(ke(t)),i&&r.push(ke(i)),r})}function Vn(n){return Pt.map(n,function(e){return ke(e)})}function ke(n){return Pt.map(n,function(e){return Ye(e)})}function Fn(n){return Pt.map(n,lr)}function Ye(n){return{longitude:n[0],latitude:n[1]}}function lr(n){return[n.longitude,n.latitude]}function Xe(n){return Pt.map(n,function(e){return Pt.map(e,lr)})}function _n(n){return Pt.map(n,function(e){var t=e[0],i=e[1],r=[];return t&&r.push(Fn(t)),i&&r.push(Fn(i)),r})}function Wo(n,e,t){return[ur().center([n,e]).radius(t)().coordinates]}function hr(n,e,t,i){var r=[];-180==i&&(i=-179.9999),-90==t&&(t=-89.9999),90==n&&(n=89.9999),180==e&&(e=179.9999);for(var o=Math.min(90,(e-i)/Math.ceil((e-i)/90)),a=(n-t)/Math.ceil((n-t)/90),s=i;s<e;s+=o){var l=[];r.push([l]),s+o>e&&(o=e-s);for(var h=s;h<=s+o;h+=5)l.push([h,n]);for(var u=n;u>=t;u-=a)l.push([s+o,u]);for(h=s+o;h>=s;h-=5)l.push([h,t]);for(u=t;u<=n;u+=a)l.push([s,u])}return r}Nn.invert=Nn;var Qe=function(n){function e(){var t=n.call(this)||this;t.className="MapPolygon",t.polygon=t.createChild(Fo.m),t.polygon.shouldClone=!1,t.polygon.applyOnClones=!0,t.setPropertyValue("precision",.5);var i=new _.h;return t.fill=i.getFor("secondaryButton"),t.stroke=i.getFor("secondaryButtonStroke"),t.strokeOpacity=1,t.tooltipPosition="pointer",t.nonScalingStroke=!0,t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.getFeature=function(){if(this.multiPolygon&&this.multiPolygon.length>0)return{type:"Feature",geometry:{type:"MultiPolygon",coordinates:this.multiPolygon}}},Object.defineProperty(e.prototype,"multiGeoPolygon",{get:function(){var t=this.getPropertyValue("multiGeoPolygon");return!t&&this.dataItem&&(t=this.dataItem.multiGeoPolygon),t},set:function(t){this.setPropertyValue("multiGeoPolygon",t,!0),this.multiPolygon=_n(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiPolygon",{get:function(){var t=this.getPropertyValue("multiPolygon");return!t&&this.dataItem&&(t=this.dataItem.multiPolygon),t},set:function(t){this.setPropertyValue("multiPolygon",t)&&(this.updateExtremes(),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.validate=function(){if(this.series){var t=this.series.chart.projection,i=t.d3Path;if(this.multiPolygon){if(this.series){var r={type:"MultiPolygon",coordinates:this.multiPolygon};t.d3Projection.precision(this.precision),this.polygon.path=i(r)}if(this.series.calculateVisualCenter){var o=0,a=this.multiPolygon[0];if(this.multiPolygon.length>1)for(var s=0;s<this.multiPolygon.length;s++){var l=this.multiPolygon[s],h=Qi({type:"Polygon",coordinates:l});h>o&&(a=l,o=h)}var u=Zo()(a);this._visualLongitude=u[0],this._visualLatitude=u[1]}else this._visualLongitude=this.longitude,this._visualLatitude=this.latitude}}n.prototype.validate.call(this)},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"latitude",{get:function(){return this.north+(this.south-this.north)/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this.east+(this.west-this.east)/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visualLatitude",{get:function(){var t=this.getPropertyValue("visualLatitude");return S.isNumber(t)?t:this._adapterO?this._adapterO.apply("visualLatitude",this._visualLatitude):this._visualLatitude},set:function(t){this.setPropertyValue("visualLatitude",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visualLongitude",{get:function(){var t=this.getPropertyValue("visualLongitude");return S.isNumber(t)?t:this._adapterO?this._adapterO.apply("visualLongitude",this._visualLongitude):this._visualLongitude},set:function(t){this.setPropertyValue("visualLongitude",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelWidth",{get:function(){return this.polygon.pixelWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelHeight",{get:function(){return this.polygon.pixelHeight},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){n.prototype.copyFrom.call(this,t),this.polygon.copyFrom(t.polygon)},e.prototype.updateExtremes=function(){n.prototype.updateExtremes.call(this)},Object.defineProperty(e.prototype,"boxArea",{get:function(){return(this.north-this.south)*(this.east-this.west)},enumerable:!0,configurable:!0}),e.prototype.getTooltipX=function(){return this.series.chart.projection.convert({longitude:this.visualLongitude,latitude:this.visualLatitude}).x},e.prototype.getTooltipY=function(){return this.series.chart.projection.convert({longitude:this.visualLongitude,latitude:this.visualLatitude}).y},Object.defineProperty(e.prototype,"precision",{get:function(){return this.getPropertyValue("precision")},set:function(t){this.setPropertyValue("precision",t,!0)},enumerable:!0,configurable:!0}),e}(pe);C.i.registeredClasses.MapPolygon=Qe;var zt=O(1244),st=O(6718),Yt=O(5964),Zn=function(n){function e(){var t=n.call(this)||this;return t.className="MapPolygonSeriesDataItem",t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.getFeature=function(){if(this.multiPolygon&&this.multiPolygon.length>0)return{type:"Feature",geometry:{type:"MultiPolygon",coordinates:this.multiPolygon}}},Object.defineProperty(e.prototype,"mapPolygon",{get:function(){var t=this;if(!this._mapPolygon){var i=this.component.mapPolygons.create();this._mapPolygon=i,this.addSprite(i),this._disposers.push(new N.ku(function(){t.component&&t.component.mapPolygons.removeValue(i)})),this.mapObject=i}return this._mapPolygon},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"polygon",{get:function(){return this._polygon},set:function(t){this._polygon=t,this.multiPolygon=[t]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiPolygon",{get:function(){return this._multiPolygon},set:function(t){this._multiPolygon=t,this.updateExtremes()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geoPolygon",{get:function(){return this._geoPolygon},set:function(t){this._geoPolygon=t,this.multiGeoPolygon=[t]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiGeoPolygon",{get:function(){return this._multiGeoPolygon},set:function(t){this._multiGeoPolygon=t,this.multiPolygon=_n(t)},enumerable:!0,configurable:!0}),e}($t),Bn=function(n){function e(){var t=n.call(this)||this;return t.calculateVisualCenter=!1,t.className="MapPolygonSeries",t.dataFields.multiPolygon="multiPolygon",t.dataFields.polygon="polygon",t.dataFields.geoPolygon="geoPolygon",t.dataFields.multiGeoPolygon="multiGeoPolygon",t.setPropertyValue("sortPolygonsBy","area"),t.setPropertyValue("sortPolygonsReversed",!1),t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.createDataItem=function(){return new Zn},e.prototype.processIncExc=function(){this.mapPolygons.clear(),n.prototype.processIncExc.call(this)},e.prototype.validateData=function(){if(this.useGeodata||this.geodata){var t=this._dataSources.geodata?void 0:this.chart.geodata;if(this.geodata&&(t=this.geodata),t){var i=void 0;if("FeatureCollection"==t.type?i=t.features:"Feature"==t.type?i=[t]:-1!=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(t.type)?i=[{geometry:t}]:console.log("nothing found in geoJSON"),i)for(var r=function(l,h){var u=i[l],f=u.geometry;if(f){var c=f.type,p=u.id;if(o.chart.geodataNames&&o.chart.geodataNames[p]&&(u.properties.name=o.chart.geodataNames[p]),"Polygon"==c||"MultiPolygon"==c){if(!o.checkInclude(o.include,o.exclude,p))return"continue";var d=f.coordinates;d&&"Polygon"==c&&(d=[d]);var g=Pt.find(o.data,function(m,b){return m.id==p});g?g.multiPolygon||(g.multiPolygon=d):o.data.push(g={multiPolygon:d,id:p,madeFromGeoData:!0}),st.softCopyProperties(u.properties,g)}}},o=this,a=0,s=i.length;a<s;a++)r(a)}}n.prototype.validateData.call(this)},e.prototype.validate=function(){if(n.prototype.validate.call(this),this.dataItems.each(function(r){st.used(r.mapPolygon)}),"none"!=this.sortPolygonsBy){var t=this.sortPolygonsBy,i=this.sortPolygonsReversed;this.mapPolygons.sort(function(r,o){var a="",s="",l=-1,h=1;switch(t){case"area":a=r.boxArea,s=o.boxArea,l=-1,h=1;break;case"name":a=r.dataItem.dataContext.name||"",s=o.dataItem.dataContext.name||"",l=1,h=-1;break;case"id":a=r.dataItem.dataContext.id||"",s=o.dataItem.dataContext.id||"",l=1,h=-1;break;case"latitude":a=i?r.south:r.north,s=i?o.south:o.north,l=-1,h=1;break;case"longitude":a=i?r.east:r.west,s=i?o.east:o.west,l=1,h=-1}return a<s?i?h:l:a>s?i?l:h:0}),this.mapPolygons.each(function(r,o){r.validate(),!r.zIndex&&!r.propertyFields.zIndex&&(r.zIndex=1e6-o)})}},Object.defineProperty(e.prototype,"mapPolygons",{get:function(){if(!this._mapPolygons){var t=new Qe,i=new zt.o(t);this._disposers.push(new zt.zQ(i)),this._disposers.push(i.template),i.template.focusable=!0,i.events.on("inserted",this.handleObjectAdded,this,!1),this._mapPolygons=i,this._mapObjects=i}return this._mapPolygons},enumerable:!0,configurable:!0}),e.prototype.getPolygonById=function(t){return Yt.find(this.mapPolygons.iterator(),function(i){return i.dataItem.dataContext.id==t})},e.prototype.copyFrom=function(t){this.mapPolygons.template.copyFrom(t.mapPolygons.template),n.prototype.copyFrom.call(this,t)},e.prototype.getFeatures=function(){var t=this,i=[];return this.dataItems.each(function(r){var o=r.getFeature();o&&i.push(o)}),this.mapPolygons.each(function(r){if(-1==t.dataItems.indexOf(r._dataItem)){var o=r.getFeature();o&&i.push(o)}}),i},Object.defineProperty(e.prototype,"sortPolygonsBy",{get:function(){return this.getPropertyValue("sortPolygonsBy")},set:function(t){this.setPropertyValue("sortPolygonsBy",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortPolygonsReversed",{get:function(){return this.getPropertyValue("sortPolygonsReversed")},set:function(t){this.setPropertyValue("sortPolygonsReversed",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),e}(Jt);function cr(){var e,n=[];return{point:function(t,i,r){e.push([t,i,r])},lineStart:function(){n.push(e=[])},lineEnd:K,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function Ue(n,e){return R(n[0]-e[0])<w&&R(n[1]-e[1])<w}function Ke(n,e,t,i){this.x=n,this.z=e,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function fr(n,e,t,i,r){var s,l,o=[],a=[];if(n.forEach(function(d){if(!((g=d.length-1)<=0)){var g,M,m=d[0],b=d[g];if(Ue(m,b)){if(!m[2]&&!b[2]){for(r.lineStart(),s=0;s<g;++s)r.point((m=d[s])[0],m[1]);return void r.lineEnd()}b[0]+=2*w}o.push(M=new Ke(m,d,null,!0)),a.push(M.o=new Ke(m,null,M,!1)),o.push(M=new Ke(b,d,null,!1)),a.push(M.o=new Ke(b,null,M,!0))}}),o.length){for(a.sort(e),pr(o),pr(a),s=0,l=a.length;s<l;++s)a[s].e=t=!t;for(var u,f,h=o[0];;){for(var c=h,p=!0;c.v;)if((c=c.n)===h)return;u=c.z,r.lineStart();do{if(c.v=c.o.v=!0,c.e){if(p)for(s=0,l=u.length;s<l;++s)r.point((f=u[s])[0],f[1]);else i(c.x,c.n.x,1,r);c=c.n}else{if(p)for(s=(u=c.p.z).length-1;s>=0;--s)r.point((f=u[s])[0],f[1]);else i(c.x,c.p.x,-1,r);c=c.p}u=(c=c.o).z,p=!p}while(!c.v);r.lineEnd()}}}function pr(n){if(e=n.length){for(var e,r,t=0,i=n[0];++t<e;)i.n=r=n[t],r.p=i,i=r;i.n=r=n[0],r.p=i}}function Wn(n){return R(n[0])<=G?n[0]:St(n[0])*((R(n[0])+G)%Q-G)}function dr(n,e){var t=Wn(e),i=e[1],r=x(i),o=[x(t),-L(t),0],a=0,s=0,l=new A;1===r?i=V+w:-1===r&&(i=-V-w);for(var h=0,u=n.length;h<u;++h)if(c=(f=n[h]).length)for(var f,c,p=f[c-1],d=Wn(p),g=p[1]/2+Bt,m=x(g),b=L(g),M=0;M<c;++M,d=y,m=D,b=W,p=v){var v=f[M],y=Wn(v),E=v[1]/2+Bt,D=x(E),W=L(E),H=y-d,k=H>=0?1:-1,U=k*H,z=U>G,gt=m*D;if(l.add(rt(gt*k*x(U),b*W+gt*L(U))),a+=z?H+k*Q:H,z^d>=t^y>=t){var et=Kt(Ht(p),Ht(v));He(et);var Y=Kt(o,et);He(Y);var P=(z^H>=0?-1:1)*lt(Y[2]);(i>P||i===P&&(et[0]||et[1]))&&(s+=z^H>=0?1:-1)}}return(a<-w||a<w&&l<-it)^1&s}function gr(n){return Array.from(function*(n){for(const e of n)yield*e}(n))}function vr(n,e,t,i){return function(r){var h,u,f,o=e(r),a=cr(),s=e(a),l=!1,c={point:p,lineStart:g,lineEnd:m,polygonStart:function(){c.point=b,c.lineStart=M,c.lineEnd=v,u=[],h=[]},polygonEnd:function(){c.point=p,c.lineStart=g,c.lineEnd=m,u=gr(u);var y=dr(h,i);u.length?(l||(r.polygonStart(),l=!0),fr(u,Yo,y,t,r)):y&&(l||(r.polygonStart(),l=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=h=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(y,E){n(y,E)&&r.point(y,E)}function d(y,E){o.point(y,E)}function g(){c.point=d,o.lineStart()}function m(){c.point=p,o.lineEnd()}function b(y,E){f.push([y,E]),s.point(y,E)}function M(){s.lineStart(),f=[]}function v(){b(f[0][0],f[0][1]),s.lineEnd();var D,H,k,U,y=s.clean(),E=a.result(),W=E.length;if(f.pop(),h.push(f),f=null,W){if(1&y){if((H=(k=E[0]).length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),D=0;D<H;++D)r.point((U=k[D])[0],U[1]);r.lineEnd()}return}W>1&&2&y&&E.push(E.pop().concat(E.shift())),u.push(E.filter(ko))}}return c}}function ko(n){return n.length>1}function Yo(n,e){return((n=n.x)[0]<0?n[1]-V-w:V-n[1])-((e=e.x)[0]<0?e[1]-V-w:V-e[1])}C.i.registeredClasses.MapPolygonSeries=Bn,C.i.registeredClasses.MapPolygonSeriesDataItem=Zn;const Hn=vr(function(){return!0},function(n){var r,e=NaN,t=NaN,i=NaN;return{lineStart:function(){n.lineStart(),r=1},point:function(o,a){var s=o>0?G:-G,l=R(o-e);R(l-G)<w?(n.point(e,t=(t+a)/2>0?V:-V),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(s,t),n.point(o,t),r=0):i!==s&&l>=G&&(R(e-i)<w&&(e-=i*w),R(o-s)<w&&(o-=s*w),t=function(n,e,t,i){var r,o,a=x(n-t);return R(a)>w?jt((x(e)*(o=L(i))*x(t)-x(i)*(r=L(e))*x(n))/(r*o*a)):(e+i)/2}(e,t,o,a),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(s,t),r=0),n.point(e=o,t=a),i=s},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-r}}},function(n,e,t,i){var r;if(null==n)i.point(-G,r=t*V),i.point(0,r),i.point(G,r),i.point(G,0),i.point(G,-r),i.point(0,-r),i.point(-G,-r),i.point(-G,0),i.point(-G,r);else if(R(n[0]-e[0])>w){var o=n[0]<e[0]?G:-G;i.point(-o,r=t*o/2),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])},[-G,-V]);function mr(n){var e=L(n),t=6*I,i=e>0,r=R(e)>w;function a(u,f){return L(u)*L(f)>e}function l(u,f,c){var g=[1,0,0],m=Kt(Ht(u),Ht(f)),b=Be(m,m),M=m[0],v=b-M*M;if(!v)return!c&&u;var y=e*b/v,E=-e*M/v,D=Kt(g,m),W=We(g,y);jn(W,We(m,E));var k=D,U=Be(W,k),z=Be(k,k),gt=U*U-z*(Be(W,W)-1);if(!(gt<0)){var et=ot(gt),Y=We(k,(-U-et)/z);if(jn(Y,W),Y=Ze(Y),!c)return Y;var bt,P=u[0],Z=f[0],at=u[1],vt=f[1];Z<P&&(bt=P,P=Z,Z=bt);var ze=Z-P,At=R(ze-G)<w;if(!At&&vt<at&&(bt=at,at=vt,vt=bt),At||ze<w?At?at+vt>0^Y[1]<(R(Y[0]-P)<w?at:vt):at<=Y[1]&&Y[1]<=vt:ze>G^(P<=Y[0]&&Y[0]<=Z)){var Vt=We(k,(-U+et)/z);return jn(Vt,W),[Y,Ze(Vt)]}}}function h(u,f){var c=i?n:G-n,p=0;return u<-c?p|=1:u>c&&(p|=2),f<-c?p|=4:f>c&&(p|=8),p}return vr(a,function(u){var f,c,p,d,g;return{lineStart:function(){d=p=!1,g=1},point:function(m,b){var v,M=[m,b],y=a(m,b),E=i?y?0:h(m,b):y?h(m+(m<0?G:-G),b):0;if(!f&&(d=p=y)&&u.lineStart(),y!==p&&(!(v=l(f,M))||Ue(f,v)||Ue(M,v))&&(M[2]=1),y!==p)g=0,y?(u.lineStart(),v=l(M,f),u.point(v[0],v[1])):(v=l(f,M),u.point(v[0],v[1],2),u.lineEnd()),f=v;else if(r&&f&&i^y){var D;!(E&c)&&(D=l(M,f,!0))&&(g=0,i?(u.lineStart(),u.point(D[0][0],D[0][1]),u.point(D[1][0],D[1][1]),u.lineEnd()):(u.point(D[1][0],D[1][1]),u.lineEnd(),u.lineStart(),u.point(D[0][0],D[0][1],3)))}y&&(!f||!Ue(f,M))&&u.point(M[0],M[1]),f=M,p=y,c=E},lineEnd:function(){p&&u.lineEnd(),f=null},clean:function(){return g|(d&&p)<<1}}},function(u,f,c,p){ar(p,n,t,c,u,f)},i?[0,-n]:[-G,n-G])}var ge=1e9,qe=-ge;function $e(n,e,t,i){function r(h,u){return n<=h&&h<=t&&e<=u&&u<=i}function o(h,u,f,c){var p=0,d=0;if(null==h||(p=a(h,f))!==(d=a(u,f))||l(h,u)<0^f>0)do{c.point(0===p||3===p?n:t,p>1?i:e)}while((p=(p+f+4)%4)!==d);else c.point(u[0],u[1])}function a(h,u){return R(h[0]-n)<w?u>0?0:3:R(h[0]-t)<w?u>0?2:1:R(h[1]-e)<w?u>0?1:0:u>0?3:2}function s(h,u){return l(h.x,u.x)}function l(h,u){var f=a(h,1),c=a(u,1);return f!==c?f-c:0===f?u[1]-h[1]:1===f?h[0]-u[0]:2===f?h[1]-u[1]:u[0]-h[0]}return function(h){var c,p,d,g,m,b,M,v,y,E,D,u=h,f=cr(),W={point:H,lineStart:function(){W.point=Y,p&&p.push(d=[]),E=!0,y=!1,M=v=NaN},lineEnd:function(){c&&(Y(g,m),b&&y&&f.rejoin(),c.push(f.result())),W.point=H,y&&u.lineEnd()},polygonStart:function(){u=f,c=[],p=[],D=!0},polygonEnd:function(){var P=function(){for(var P=0,Z=0,at=p.length;Z<at;++Z)for(var Qt,Vt,vt=p[Z],bt=1,ze=vt.length,At=vt[0],xn=At[0],ce=At[1];bt<ze;++bt)Qt=xn,Vt=ce,xn=(At=vt[bt])[0],ce=At[1],Vt<=i?ce>i&&(xn-Qt)*(i-Vt)>(ce-Vt)*(n-Qt)&&++P:ce<=i&&(xn-Qt)*(i-Vt)<(ce-Vt)*(n-Qt)&&--P;return P}(),Z=D&&P,at=(c=gr(c)).length;(Z||at)&&(h.polygonStart(),Z&&(h.lineStart(),o(null,null,1,h),h.lineEnd()),at&&fr(c,s,P,o,h),h.polygonEnd()),u=h,c=p=d=null}};function H(P,Z){r(P,Z)&&u.point(P,Z)}function Y(P,Z){var at=r(P,Z);if(p&&d.push([P,Z]),E)g=P,m=Z,b=at,E=!1,at&&(u.lineStart(),u.point(P,Z));else if(at&&y)u.point(P,Z);else{var vt=[M=Math.max(qe,Math.min(ge,M)),v=Math.max(qe,Math.min(ge,v))],bt=[P=Math.max(qe,Math.min(ge,P)),Z=Math.max(qe,Math.min(ge,Z))];!function(n,e,t,i,r,o){var d,a=n[0],s=n[1],u=0,f=1,c=e[0]-a,p=e[1]-s;if(d=t-a,c||!(d>0)){if(d/=c,c<0){if(d<u)return;d<f&&(f=d)}else if(c>0){if(d>f)return;d>u&&(u=d)}if(d=r-a,c||!(d<0)){if(d/=c,c<0){if(d>f)return;d>u&&(u=d)}else if(c>0){if(d<u)return;d<f&&(f=d)}if(d=i-s,p||!(d>0)){if(d/=p,p<0){if(d<u)return;d<f&&(f=d)}else if(p>0){if(d>f)return;d>u&&(u=d)}if(d=o-s,p||!(d<0)){if(d/=p,p<0){if(d>f)return;d>u&&(u=d)}else if(p>0){if(d<u)return;d<f&&(f=d)}return u>0&&(n[0]=a+u*c,n[1]=s+u*p),f<1&&(e[0]=a+f*c,e[1]=s+f*p),!0}}}}}(vt,bt,n,e,t,i)?at&&(u.lineStart(),u.point(P,Z),D=!1):(y||(u.lineStart(),u.point(vt[0],vt[1])),u.point(bt[0],bt[1]),at||u.lineEnd(),D=!1)}M=P,v=Z,y=at}return W}}const ve=n=>n;function qo(n){return{stream:me(n)}}function me(n){return function(e){var t=new kn;for(var i in n)t[i]=n[i];return t.stream=e,t}}function kn(){}kn.prototype={constructor:kn,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ne=1/0,Je=ne,ye=-ne,tn=ye;const en={point:function(n,e){n<ne&&(ne=n),n>ye&&(ye=n),e<Je&&(Je=e),e>tn&&(tn=e)},lineStart:K,lineEnd:K,polygonStart:K,polygonEnd:K,result:function(){var n=[[ne,Je],[ye,tn]];return ye=tn=-(Je=ne=1/0),n}};function Yn(n,e,t){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=i&&n.clipExtent(null),Lt(t,n.stream(en)),e(en.result()),null!=i&&n.clipExtent(i),n}function nn(n,e,t){return Yn(n,function(i){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),s=+e[0][0]+(r-a*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(o-a*(i[1][1]+i[0][1]))/2;n.scale(150*a).translate([s,l])},t)}function Xn(n,e,t){return nn(n,[[0,0],e],t)}function Qn(n,e,t){return Yn(n,function(i){var r=+e,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,s=-o*i[0][1];n.scale(150*o).translate([a,s])},t)}function Un(n,e,t){return Yn(n,function(i){var r=+e,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],s=(r-o*(i[1][1]+i[0][1]))/2;n.scale(150*o).translate([a,s])},t)}var ta=L(30*I);function Pr(n,e){return+e?function(n,e){function t(i,r,o,a,s,l,h,u,f,c,p,d,g,m){var b=h-i,M=u-r,v=b*b+M*M;if(v>4*e&&g--){var y=a+c,E=s+p,D=l+d,W=ot(y*y+E*E+D*D),H=lt(D/=W),k=R(R(D)-1)<w||R(o-f)<w?(o+f)/2:rt(E,y),U=n(k,H),z=U[0],gt=U[1],et=z-i,Y=gt-r,P=M*et-b*Y;(P*P/v>e||R((b*et+M*Y)/v-.5)>.3||a*c+s*p+l*d<ta)&&(t(i,r,o,a,s,l,z,gt,k,y/=W,E/=W,D,g,m),m.point(z,gt),t(z,gt,k,y,E,D,h,u,f,c,p,d,g,m))}}return function(i){var r,o,a,s,l,h,u,f,c,p,d,g,m={point:b,lineStart:M,lineEnd:y,polygonStart:function(){i.polygonStart(),m.lineStart=E},polygonEnd:function(){i.polygonEnd(),m.lineStart=M}};function b(H,k){H=n(H,k),i.point(H[0],H[1])}function M(){f=NaN,m.point=v,i.lineStart()}function v(H,k){var U=Ht([H,k]),z=n(H,k);t(f,c,u,p,d,g,f=z[0],c=z[1],u=H,p=U[0],d=U[1],g=U[2],16,i),i.point(f,c)}function y(){m.point=b,i.lineEnd()}function E(){M(),m.point=D,m.lineEnd=W}function D(H,k){v(r=H,k),o=f,a=c,s=p,l=d,h=g,m.point=v}function W(){t(f,c,u,p,d,g,o,a,r,s,l,h,16,i),m.lineEnd=y,y()}return m}}(n,e):function(n){return me({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}(n)}var ia=me({point:function(n,e){this.stream.point(n*I,e*I)}});function Sr(n,e,t,i,r,o){if(!o)return function(n,e,t,i,r){function o(a,s){return[e+n*(a*=i),t-n*(s*=r)]}return o.invert=function(a,s){return[(a-e)/n*i,(t-s)/n*r]},o}(n,e,t,i,r);var a=L(o),s=x(o),l=a*n,h=s*n,u=a/n,f=s/n,c=(s*t-a*e)/n,p=(s*e+a*t)/n;function d(g,m){return[l*(g*=i)-h*(m*=r)+e,t-h*g-l*m]}return d.invert=function(g,m){return[i*(u*g-f*m+c),r*(p-f*g-u*m)]},d}function Mt(n){return Kn(function(){return n})()}function Kn(n){var e,u,b,M,v,D,W,H,k,U,t=150,i=480,r=250,o=0,a=0,s=0,l=0,h=0,f=0,c=1,p=1,d=null,g=Hn,m=null,y=ve,E=.5;function z(P){return H(P[0]*I,P[1]*I)}function gt(P){return(P=H.invert(P[0],P[1]))&&[P[0]*B,P[1]*B]}function et(){var P=Sr(t,0,0,c,p,f).apply(null,e(o,a)),Z=Sr(t,i-P[0],r-P[1],c,p,f);return u=An(s,l,h),W=zn(e,Z),H=zn(u,W),D=Pr(W,E),Y()}function Y(){return k=U=null,z}return z.stream=function(P){return k&&U===P?k:k=ia(function(n){return me({point:function(e,t){var i=n(e,t);return this.stream.point(i[0],i[1])}})}(u)(g(D(y(U=P)))))},z.preclip=function(P){return arguments.length?(g=P,d=void 0,Y()):g},z.postclip=function(P){return arguments.length?(y=P,m=b=M=v=null,Y()):y},z.clipAngle=function(P){return arguments.length?(g=+P?mr(d=P*I):(d=null,Hn),Y()):d*B},z.clipExtent=function(P){return arguments.length?(y=null==P?(m=b=M=v=null,ve):$e(m=+P[0][0],b=+P[0][1],M=+P[1][0],v=+P[1][1]),Y()):null==m?null:[[m,b],[M,v]]},z.scale=function(P){return arguments.length?(t=+P,et()):t},z.translate=function(P){return arguments.length?(i=+P[0],r=+P[1],et()):[i,r]},z.center=function(P){return arguments.length?(o=P[0]%360*I,a=P[1]%360*I,et()):[o*B,a*B]},z.rotate=function(P){return arguments.length?(s=P[0]%360*I,l=P[1]%360*I,h=P.length>2?P[2]%360*I:0,et()):[s*B,l*B,h*B]},z.angle=function(P){return arguments.length?(f=P%360*I,et()):f*B},z.reflectX=function(P){return arguments.length?(c=P?-1:1,et()):c<0},z.reflectY=function(P){return arguments.length?(p=P?-1:1,et()):p<0},z.precision=function(P){return arguments.length?(D=Pr(W,E=P*P),Y()):ot(E)},z.fitExtent=function(P,Z){return nn(z,P,Z)},z.fitSize=function(P,Z){return Xn(z,P,Z)},z.fitWidth=function(P,Z){return Qn(z,P,Z)},z.fitHeight=function(P,Z){return Un(z,P,Z)},function(){return e=n.apply(this,arguments),z.invert=e.invert&&gt,et()}}function Pe(n,e){return[n,e]}function Mr(){return Mt(Pe).scale(152.63)}Pe.invert=Pe;var br,Lr,Jn,ti,qn=new A,$n=new A,Zt={point:K,lineStart:K,lineEnd:K,polygonStart:function(){Zt.lineStart=aa,Zt.lineEnd=ua},polygonEnd:function(){Zt.lineStart=Zt.lineEnd=Zt.point=K,qn.add(R($n)),$n=new A},result:function(){var n=qn/2;return qn=new A,n}};function aa(){Zt.point=sa}function sa(n,e){Zt.point=xr,br=Jn=n,Lr=ti=e}function xr(n,e){$n.add(ti*n-Jn*e),Jn=n,ti=e}function ua(){xr(br,Lr)}const wr=Zt;var Cr,Er,Tt,It,ei=0,ni=0,Se=0,rn=0,on=0,ie=0,ii=0,ri=0,Me=0,xt={point:Xt,lineStart:Tr,lineEnd:Ir,polygonStart:function(){xt.lineStart=ca,xt.lineEnd=fa},polygonEnd:function(){xt.point=Xt,xt.lineStart=Tr,xt.lineEnd=Ir},result:function(){var n=Me?[ii/Me,ri/Me]:ie?[rn/ie,on/ie]:Se?[ei/Se,ni/Se]:[NaN,NaN];return ei=ni=Se=rn=on=ie=ii=ri=Me=0,n}};function Xt(n,e){ei+=n,ni+=e,++Se}function Tr(){xt.point=la}function la(n,e){xt.point=ha,Xt(Tt=n,It=e)}function ha(n,e){var t=n-Tt,i=e-It,r=ot(t*t+i*i);rn+=r*(Tt+n)/2,on+=r*(It+e)/2,ie+=r,Xt(Tt=n,It=e)}function Ir(){xt.point=Xt}function ca(){xt.point=pa}function fa(){Dr(Cr,Er)}function pa(n,e){xt.point=Dr,Xt(Cr=Tt=n,Er=It=e)}function Dr(n,e){var t=n-Tt,i=e-It,r=ot(t*t+i*i);rn+=r*(Tt+n)/2,on+=r*(It+e)/2,ie+=r,ii+=(r=It*n-Tt*e)*(Tt+n),ri+=r*(It+e),Me+=3*r,Xt(Tt=n,It=e)}const Gr=xt;function jr(n){this._context=n}jr.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(n,e){switch(this._point){case 0:this._context.moveTo(n,e),this._point=1;break;case 1:this._context.lineTo(n,e);break;default:this._context.moveTo(n+this._radius,e),this._context.arc(n,e,this._radius,0,Q)}},result:K};var ai,Or,Rr,be,Le,oi=new A,an={point:K,lineStart:function(){an.point=da},lineEnd:function(){ai&&zr(Or,Rr),an.point=K},polygonStart:function(){ai=!0},polygonEnd:function(){ai=null},result:function(){var n=+oi;return oi=new A,n}};function da(n,e){an.point=zr,Or=be=n,Rr=Le=e}function zr(n,e){oi.add(ot((be-=n)*be+(Le-=e)*Le)),be=n,Le=e}const Nr=an;function Ar(){this._string=[]}function Vr(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Fr(n,e){var i,r,t=4.5;function o(a){return a&&("function"==typeof t&&r.pointRadius(+t.apply(this,arguments)),Lt(a,i(r))),r.result()}return o.area=function(a){return Lt(a,i(wr)),wr.result()},o.measure=function(a){return Lt(a,i(Nr)),Nr.result()},o.bounds=function(a){return Lt(a,i(en)),en.result()},o.centroid=function(a){return Lt(a,i(Gr)),Gr.result()},o.projection=function(a){return arguments.length?(i=null==a?(n=null,ve):(n=a).stream,o):n},o.context=function(a){return arguments.length?(r=null==a?(e=null,new Ar):new jr(e=a),"function"!=typeof t&&r.pointRadius(t),o):e},o.pointRadius=function(a){return arguments.length?(t="function"==typeof a?a:(r.pointRadius(+a),+a),o):t},o.projection(n).context(e)}function _r(n,e){var t=n[0]*I,i=n[1]*I,r=e[0]*I,o=e[1]*I,a=L(i),s=x(i),l=L(o),h=x(o),u=a*L(t),f=a*x(t),c=l*L(r),p=l*x(r),d=2*lt(ot(Zi(o-i)+a*l*Zi(r-t))),g=x(d),m=d?function(b){var M=x(b*=d)/g,v=x(d-b)/g,y=v*u+M*c,E=v*f+M*p,D=v*s+M*h;return[rt(E,y)*B,rt(D,ot(y*y+E*E))*B]}:function(){return[t*B,i*B]};return m.distance=d,m}Ar.prototype={_radius:4.5,_circle:Vr(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(n,e){switch(this._point){case 0:this._string.push("M",n,",",e),this._point=1;break;case 1:this._string.push("L",n,",",e);break;default:null==this._circle&&(this._circle=Vr(this._radius)),this._string.push("M",n,",",e,this._circle)}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}return null}};var si,ui,sn,un,re={sphere:K,point:K,lineStart:function(){re.point=ma,re.lineEnd=va},lineEnd:K,polygonStart:K,polygonEnd:K};function va(){re.point=re.lineEnd=K}function ma(n,e){ui=n*=I,sn=x(e*=I),un=L(e),re.point=ya}function ya(n,e){n*=I;var t=x(e*=I),i=L(e),r=R(n-ui),o=L(r),s=i*x(r),l=un*t-sn*i*o,h=sn*t+un*i*o;si.add(rt(ot(s*s+l*l),h)),ui=n,sn=t,un=i}function Zr(n){return si=new A,Lt(n,re),+si}var li=[null,null],Pa={type:"LineString",coordinates:li};function xe(n,e){return li[0]=n,li[1]=e,Zr(Pa)}var dt=function(){function n(){this.d3Projection=Mr()}return Object.defineProperty(n.prototype,"d3Projection",{get:function(){return this._d3Projection},set:function(e){this._d3Projection=e,e.precision(.1),this._d3Path=Fr().projection(e),this.chart&&this.chart.invalidateProjection()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"d3Path",{get:function(){return this._d3Path},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scale",{get:function(){return this.d3Projection.scale()/100},enumerable:!0,configurable:!0}),n.prototype.convert=function(e){var t=this.d3Projection([e.longitude,e.latitude]);if(t)return{x:t[0],y:t[1]}},n.prototype.invert=function(e){var t=this.d3Projection.invert([e.x,e.y]);if(t)return{longitude:t[0],latitude:t[1]}},n.prototype.project=function(e,t){return this.convert({longitude:e*T.DEGREES,latitude:t*T.DEGREES})},n.prototype.unproject=function(e,t){return this.invert({x:e,y:t})},n.prototype.rotate=function(e,t,i,r){var a=i*T.RADIANS;r*=T.RADIANS;var s=e.longitude*T.RADIANS+t*T.RADIANS,l=e.latitude*T.RADIANS,h=Math.cos(a),u=Math.sin(a),f=Math.cos(r),c=Math.sin(r),p=Math.cos(l),d=Math.cos(s)*p,g=Math.sin(s)*p,m=Math.sin(l),b=m*h+d*u;return{longitude:T.DEGREES*Math.atan2(g*f-b*c,d*h-m*u),latitude:T.DEGREES*Math.asin(b*f+g*c)}},n.prototype.unrotate=function(e,t,i,r){var a=i*T.RADIANS;r*=T.RADIANS;var s=e.longitude*T.RADIANS-t*T.RADIANS,l=e.latitude*T.RADIANS,h=Math.cos(a),u=Math.sin(a),f=Math.cos(r),c=Math.sin(r),p=Math.cos(l),d=Math.cos(s)*p,g=Math.sin(s)*p,m=Math.sin(l),b=m*f-g*c;return{longitude:T.DEGREES*Math.atan2(g*f+m*c,d*h+b*u),latitude:T.DEGREES*Math.asin(b*h-d*u)}},n.prototype.intermediatePoint=function(e,t,i){var r=_r([e.longitude,e.latitude],[t.longitude,t.latitude])(i);return{longitude:r[0],latitude:r[1]}},n.prototype.multiDistance=function(e){for(var t=0,i=0;i<e.length;i++){var r=e[i];if(r.length>1)for(var o=1;o<r.length;o++)t+=this.distance(r[o-1],r[o])}return t},n.prototype.distance=function(e,t){return xe([e.longitude,e.latitude],[t.longitude,t.latitude])},n.prototype.positionToPoint=function(e,t){if(e){var i=this.positionToGeoPoint(e,t),r=this.positionToGeoPoint(e,t-.01),o=this.positionToGeoPoint(e,t+.01);if(r&&o){var a=this.convert(i),s=this.convert(r),l=this.convert(o);return{x:a.x,y:a.y,angle:T.getAngle(s,l)}}}return{x:0,y:0,angle:0}},n.prototype.positionToGeoPoint=function(e,t){if(e){for(var i=this.multiDistance(e),r=0,a=0,s=0,l=void 0,h=void 0,u=0;u<e.length;u++){var f=e[u];if(f.length>1){for(var c=1;c<f.length;c++)if(a=r/i,s=(r+=this.distance(l=f[c-1],h=f[c]))/i,a<=t&&s>t){u=e.length;break}}else 1==f.length&&(l=f[0],h=f[0],a=0,s=1)}if(l&&h)return this.intermediatePoint(l,h,(t-a)/(s-a))}return{longitude:0,latitude:0}},n}();C.i.registeredClasses.Projection=dt;var Sa=O(8514),Ma=O(8102),Br=O(8175),hi=function(n){function e(){var t=n.call(this)||this;t._chart=new N.cx,t.className="SmallMap",t.align="left",t.valign="bottom",t.percentHeight=20,t.percentWidth=20,t.margin(5,5,5,5);var i=new _.h;t.background.fillOpacity=.9,t.background.fill=i.getFor("background"),t.events.on("hit",t.moveToPosition,t,!1),t.events.on("maxsizechanged",t.updateMapSize,t,!1),t.seriesContainer=t.createChild(te.W),t.seriesContainer.shouldClone=!1;var r=t.createChild(Ma.A);return r.shouldClone=!1,r.stroke=i.getFor("alternativeBackground"),r.strokeWidth=1,r.strokeOpacity=.5,r.fill=(0,Br.$_)(),r.verticalCenter="middle",r.horizontalCenter="middle",r.isMeasured=!1,r.visible=!1,t.rectangle=r,t._disposers.push(t._chart),t.applyTheme(),t}return(0,j.ZT)(e,n),Object.defineProperty(e.prototype,"series",{get:function(){return this._series||(this._series=new zt.aV,this._series.events.on("inserted",this.handleSeriesAdded,this,!1),this._series.events.on("removed",this.handleSeriesRemoved,this,!1)),this._series},enumerable:!0,configurable:!0}),e.prototype.handleSeriesAdded=function(t){var i=t.newValue;if(this.chart.series.contains(i)){var r=i.clone();this._series.removeValue(i),this._series.push(r),i=r,this.chart.dataUsers.push(r)}i.chart=this.chart,i.parent=this.seriesContainer,i.interactionsEnabled=!1,i.events.on("inited",this.updateMapSize,this,!1),i.hidden=!1},e.prototype.handleSeriesRemoved=function(t){this.invalidate()},e.prototype.moveToPosition=function(t){var i=st.spritePointToSprite(t.spritePoint,this,this.seriesContainer),r=this.chart.seriesPointToGeo(i);this.chart.zoomToGeoPoint(r,this.chart.zoomLevel,!0)},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this.chart!=t&&this._chart.set(t,new N.FV([t.events.on("mappositionchanged",this.updateRectangle,this,!1),t.events.on("scaleratiochanged",this.updateMapSize,this,!1)]))},enumerable:!0,configurable:!0}),e.prototype.updateRectangle=function(){var t=this.chart,i=t.zoomLevel,r=this.rectangle;r.width=this.pixelWidth/i,r.height=this.pixelHeight/i;var o=Math.min(this.percentWidth,this.percentHeight)/100,a=t.seriesContainer;r.x=Math.ceil(-a.pixelX*o/i)+this.seriesContainer.pixelX,r.y=Math.ceil(-a.pixelY*o/i)+this.seriesContainer.pixelY,r.validate()},e.prototype.updateMapSize=function(){if(this.chart){var t=this.chart.scaleRatio*Math.min(this.percentWidth,this.percentHeight)/100;this.seriesContainer.scale=t;var i={width:0,height:0,x:0,y:0};try{i=this.seriesContainer.group.node.getBBox()}catch(r){}i.width>0&&(this.rectangle.visible=!0),this.seriesContainer.x=this.pixelWidth/2-i.x*t-i.width/2*t,this.seriesContainer.y=this.pixelHeight/2-i.y*t-i.height/2*t,this.updateRectangle(),this.afterDraw()}},e.prototype.afterDraw=function(){n.prototype.afterDraw.call(this),this.rectangle.maskRectangle={x:-1,y:-1,width:Math.ceil(this.pixelWidth+2),height:Math.ceil(this.pixelHeight+2)}},e.prototype.processConfig=function(t){if(t&&S.hasValue(t.series)&&S.isArray(t.series))for(var i=0,r=t.series.length;i<r;i++){var o=t.series[i];S.hasValue(o)&&S.isString(o)&&this.map.hasKey(o)&&(t.series[i]=this.map.getKey(o))}n.prototype.processConfig.call(this,t)},e}(te.W);C.i.registeredClasses.SmallMap=hi;var ci=O(2735),fi=O(9320),ba=O(9061);function Wr(n){var e=we(n.longitude),t=Math.asin(Math.sin(n.latitude*T.RADIANS))*T.DEGREES,i=we(n.latitude);return Math.abs(i)>90&&(e=we(e+180)),n.longitude=e,n.latitude=t,n}function Hr(n){return Pt.each(n,function(e){Pt.each(e,function(t){Wr(t)})}),n}function we(n){return(n%=360)>180&&(n-=360),n<-180&&(n+=360),n}function La(n){return{x:n.longitude,y:n.latitude}}var ln=function(n){function e(){var t=n.call(this)||this;return t.adjustRotation=!0,t.className="MapLineObject",t.isMeasured=!1,t.layout="none",t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.validatePosition=function(){var t=this.mapLine;if(t){var i=t.positionToPoint(this.position);if(this.x=i.x,this.y=i.y,this.adjustRotation&&(this.rotation=i.angle),this.mapLine.dataItem&&(this.scale=1/this.mapLine.dataItem.component.scale),t.shortestDistance){var a=this.mapLine.series.chart.projection,s=a.positionToGeoPoint(t.multiGeoLine,this.position),l=a.d3Path({type:"Point",coordinates:[s.longitude,s.latitude]});this.__disabled=!l}}n.prototype.validatePosition.call(this)},Object.defineProperty(e.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(t){this.setPropertyValue("position",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustRotation",{get:function(){return this.getPropertyValue("adjustRotation")},set:function(t){this.setPropertyValue("adjustRotation",t,!1,!0)},enumerable:!0,configurable:!0}),e}(te.W);C.i.registeredClasses.MapLineObject=ln;var pi=function(n){function e(){var t=n.call(this)||this;return t.className="MapImageSeriesDataItem",t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.getFeature=function(){return{type:"Feature",geometry:{type:"Point",coordinates:this.point}}},Object.defineProperty(e.prototype,"mapImage",{get:function(){var t=this;if(!this._mapImage){var i=this.component.mapImages.create();this.addSprite(i),this._mapImage=i,this._disposers.push(i),this._disposers.push(new N.ku(function(){t.component&&t.component.mapImages.removeValue(i)})),this.mapObject=i}return this._mapImage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point",{get:function(){return this._point},set:function(t){this._point=t,this._geoPoint=Ye(t),this.updateExtremes()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiPoint",{get:function(){return[this._point]},set:function(t){this._point=t[0],this._geoPoint=Ye(this._point),this.updateExtremes()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geoPoint",{get:function(){return this._geoPoint},set:function(t){this._geoPoint=t,this.point=[t.longitude,t.latitude]},enumerable:!0,configurable:!0}),e}($t),hn=function(n){function e(){var t=n.call(this)||this;return t.className="MapImageSeries",t.dataFields.multiPoint="multiPoint",t.dataFields.point="point",t.dataFields.geoPoint="geoPoint",t.dataFields.multiGeoPoint="multiGeoPoint",t.ignoreBounds=!0,t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.createDataItem=function(){return new pi},e.prototype.validateData=function(){var t=this;if(this.data.length>0&&0==this._parseDataFrom&&this.mapImages.clear(),this.useGeodata&&(this.useGeodata||this.geodata)){var i=this.chart.geodata,r=void 0;if("FeatureCollection"==i.type?r=i.features:"Feature"==i.type?r=[i]:-1!=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(i.type)?r=[{geometry:i}]:console.log("nothing found in geoJSON"),r)for(var o=function(h,u){var f=r[h],c=f.geometry;if(c){var p=c.type,d=f.id;if("Point"==p||"MultiPoint"==p){if(!a.checkInclude(a.include,a.exclude,d))return"continue";var g=c.coordinates;"Point"==p&&(g=[g]);var m=Pt.find(a.data,function(b,M){return b.id==d});m?m.multiPoint||(m.multiPoint=g):a.data.push(m={multiPoint:g,id:d,madeFromGeoData:!0}),st.softCopyProperties(f.properties,m)}}},a=this,s=0,l=r.length;s<l;s++)o(s)}n.prototype.validateData.call(this),Yt.each(this.dataItems.iterator(),function(h){var u=h.mapImage;u.isDisposed()||(t.mapImages.moveValue(u),S.isNumber(u.latitude)&&S.isNumber(u.latitude)&&(h.geoPoint={latitude:u.latitude,longitude:u.longitude}))})},Object.defineProperty(e.prototype,"mapImages",{get:function(){if(!this._mapImages){var t=new de,i=new zt.o(t);this._disposers.push(new zt.zQ(i)),this._disposers.push(i.template),i.template.focusable=!0,i.events.on("inserted",this.handleObjectAdded,this,!1),this._mapImages=i,this._mapObjects=i}return this._mapImages},enumerable:!0,configurable:!0}),e.prototype.validateDataElement=function(t){n.prototype.validateDataElement.call(this,t),t.mapImage.invalidate()},e.prototype.validate=function(){n.prototype.validate.call(this),Yt.each(this.mapImages.iterator(),function(t){t.validatePosition()})},e.prototype.copyFrom=function(t){this.mapImages.template.copyFrom(t.mapImages.template),n.prototype.copyFrom.call(this,t)},e.prototype.getFeatures=function(){var t=this,i=[];return this.dataItems.each(function(r){var o=r.getFeature();o&&i.push(o)}),this.mapImages.each(function(r){if(-1==t.dataItems.indexOf(r._dataItem)){var o=r.getFeature();o&&i.push(o)}}),i},e.prototype.getImageById=function(t){return Yt.find(this.mapImages.iterator(),function(i){var r=i.dataItem.dataContext;if(i.id==t||r&&r.id==t)return!0})},e}(Jt);C.i.registeredClasses.MapImageSeries=hn,C.i.registeredClasses.MapImageSeriesDataItem=pi;var xa=O(6343),wa=O(2985),ut=O(1784),oe=function(n){function e(){var t=n.call(this)||this;t._imageListeners={},t.className="MapLine",t.createLine(),t.line.stroke=(0,Br.$_)(),t.line.parent=t,t.strokeOpacity=1,t.setPropertyValue("precision",.1);var i=new _.h;return t.stroke=i.getFor("grid"),t.shortestDistance=!0,t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.createLine=function(){this.line=new wa.a},e.prototype.positionToPoint=function(t){return this.shortestDistance?this.series.chart.projection.positionToPoint(this.multiGeoLine,t):this.line?this.line.positionToPoint(t):{x:0,y:0,angle:0}},Object.defineProperty(e.prototype,"multiGeoLine",{get:function(){var t=this.getPropertyValue("multiGeoLine");return!t&&this.dataItem&&this.dataItem.multiGeoLine&&(t=this.dataItem.multiGeoLine),t},set:function(t){if(t&&t.length>0){this.setPropertyValue("multiGeoLine",Hr(t),!0);var i=Xe(t);this.setPropertyValue("multiLine",i),this.updateExtremes()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiLine",{get:function(){var t=this.getPropertyValue("multiLine");return!t&&this.dataItem&&this.dataItem.multiLine&&(t=this.dataItem.multiLine),t},set:function(t){this.setPropertyValue("multiLine",t),this.multiGeoLine=Vn(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imagesToConnect",{get:function(){return this.getPropertyValue("imagesToConnect")},set:function(t){var i=this;if(this.setPropertyValue("imagesToConnect",t,!0),this.handleImagesToConnect(),this.series){var r=this.series.chart;r&&r.series.each(function(o){o instanceof hn&&(o.isReady()||i._disposers.push(o.events.on("ready",i.handleImagesToConnect,i,!1)))})}},enumerable:!0,configurable:!0}),e.prototype.handleImagesToConnect=function(){var t,i,r=this;if(this.imagesToConnect){var o=[],a=[o],s=function(c){if(S.isString(c)){var p=l.series.chart;p&&p.series.each(function(g){if(g instanceof hn){var m=g.getImageById(c);m&&(c=m)}})}if(c instanceof de&&(o.push({longitude:c.longitude,latitude:c.latitude}),!l._imageListeners[c.uid])){var d=c.events.on("propertychanged",function(g){("longitude"==g.property||"latitude"==g.property)&&(r.handleImagesToConnect(),r.invalidate())},l,!1);l._imageListeners[c.uid]=d,l._disposers.push(d)}},l=this;try{for(var h=(0,j.XA)(this.imagesToConnect),u=h.next();!u.done;u=h.next())s(u.value)}catch(c){t={error:c}}finally{try{u&&!u.done&&(i=h.return)&&i.call(h)}finally{if(t)throw t.error}}this.multiGeoLine=a}},e.prototype.validate=function(){var t=this.series.chart;if(this.multiLine){if(this.shortestDistance)t.projection.d3Projection.precision(this.precision),this.line.path=t.projection.d3Path(this.getFeature());else{for(var i=[],r=0,o=this.multiLine.length;r<o;r++){for(var a=this.multiLine[r],s=[],l=0,h=a.length;l<h;l++){var u=a[l],f=this.series.chart.projection.convert({longitude:u[0],latitude:u[1]});s.push(f)}i.push(s)}this.line.segments=i}this._arrow&&this._arrow.validatePosition(),Yt.each(this.lineObjects.iterator(),function(c){c.validatePosition()}),this.handleGlobalScale()}else this.imagesToConnect&&this.handleImagesToConnect();n.prototype.validate.call(this)},e.prototype.getFeature=function(){if(this.multiLine&&this.multiLine.length>0&&this.multiLine[0]&&this.multiLine[0].length>0)return{type:"Feature",geometry:{type:"MultiLineString",coordinates:this.multiLine}}},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"shortestDistance",{get:function(){return this.getPropertyValue("shortestDistance")},set:function(t){this.setPropertyValue("shortestDistance",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineObjects",{get:function(){return this._lineObjects||(this._lineObjects=new zt.o(new ln),this._lineObjects.events.on("inserted",this.handleLineObjectAdded,this,!1),this._disposers.push(new zt.zQ(this._lineObjects)),this._disposers.push(this._lineObjects.template)),this._lineObjects},enumerable:!0,configurable:!0}),e.prototype.handleLineObjectAdded=function(t){var i=t.newValue;i.mapLine=this,i.shouldClone=!1,i.parent=this},Object.defineProperty(e.prototype,"arrow",{get:function(){if(!this._arrow){var t=this.createChild(ln);t.shouldClone=!1,t.width=8,t.height=10,t.mapLine=this,t.position=.5;var i=t.createChild(xa.C);i.fillOpacity=1,i.width=(0,ut.aQ)(100),i.height=(0,ut.aQ)(100),i.rotation=90,i.horizontalCenter="middle",i.verticalCenter="middle",this._arrow=t}return this._arrow},set:function(t){this._arrow=t,t.mapLine=this,t.parent=this},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){n.prototype.copyFrom.call(this,t),this.line.copyFrom(t.line),this.lineObjects.copyFrom(t.lineObjects),t._arrow&&(this.arrow=t.arrow.clone())},Object.defineProperty(e.prototype,"latitude",{get:function(){return this.north+(this.south-this.north)/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this.east+(this.west-this.east)/2},enumerable:!0,configurable:!0}),e.prototype.getTooltipX=function(){var t=this.getPropertyValue("tooltipX");return t instanceof ut.gG||(t=(0,ut.aQ)(50)),t instanceof ut.gG?this.positionToPoint(t.value).x:0},e.prototype.getTooltipY=function(){var t=this.getPropertyValue("tooltipY");return t instanceof ut.gG||(t=(0,ut.aQ)(50)),t instanceof ut.gG?this.positionToPoint(t.value).y:0},Object.defineProperty(e.prototype,"precision",{get:function(){return this.getPropertyValue("precision")},set:function(t){this.setPropertyValue("precision",t,!0)},enumerable:!0,configurable:!0}),e}(pe);C.i.registeredClasses.MapLine=oe;var ae=function(n){function e(){var t=n.call(this)||this;return t.className="MapLineSeriesDataItem",t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.getFeature=function(){if(this.multiLine&&this.multiLine.length>0)return{type:"Feature",geometry:{type:"MultiLineString",coordinates:this.multiLine}}},Object.defineProperty(e.prototype,"mapLine",{get:function(){var t=this;if(!this._mapLine){var i=this.component.mapLines.create();this._mapLine=i,this.addSprite(i),this._disposers.push(i),this._disposers.push(new N.ku(function(){t.component&&t.component.mapLines.removeValue(i)})),this.mapObject=i}return this._mapLine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._line},set:function(t){this._line=t,this.multiLine=[t]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiLine",{get:function(){return this._multiLine},set:function(t){this._multiLine=t,this._multiGeoLine=Vn(t),this.updateExtremes()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geoLine",{get:function(){return this._geoLine},set:function(t){this._geoLine=t,this.multiLine=Xe([t])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiGeoLine",{get:function(){return this._multiGeoLine},set:function(t){this._multiGeoLine=t,this.multiLine=Xe(t)},enumerable:!0,configurable:!0}),e}($t),Ce=function(n){function e(){var t=n.call(this)||this;return t.className="MapLineSeries",t.dataFields.multiLine="multiLine",t.dataFields.line="line",t.dataFields.geoLine="geoLine",t.dataFields.multiGeoLine="multiGeoLine",t.ignoreBounds=!0,t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.createDataItem=function(){return new ae},e.prototype.validateData=function(){if(this.useGeodata||this.geodata){var t=this.chart.geodata;if(t){var i=void 0;if("FeatureCollection"==t.type?i=t.features:"Feature"==t.type?i=[t]:-1!=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(t.type)?i=[{geometry:t}]:console.log("nothing found in geoJSON"),i)for(var r=function(l,h){var u=i[l],f=u.geometry;if(f){var c=f.type,p=u.id;if("LineString"==c||"MultiLineString"==c){if(!o.checkInclude(o.include,o.exclude,p))return"continue";var d=f.coordinates,g=Pt.find(o.data,function(m,b){return m.id==p});"LineString"==c&&(d=[d]),g?g.multiLine||(g.multiLine=d):o.data.push(g={multiLine:d,id:p,madeFromGeoData:!0}),st.softCopyProperties(u.properties,g)}}},o=this,a=0,s=i.length;a<s;a++)r(a)}}n.prototype.validateData.call(this)},Object.defineProperty(e.prototype,"mapLines",{get:function(){if(!this._mapLines){var t=this.createLine(),i=new zt.o(t);this._disposers.push(new zt.zQ(i)),this._disposers.push(i.template),i.events.on("inserted",this.handleObjectAdded,this,!1),this._mapLines=i,this._mapObjects=i}return this._mapLines},enumerable:!0,configurable:!0}),e.prototype.createLine=function(){return new oe},e.prototype.validate=function(){this.dataItems.each(function(t){st.used(t.mapLine)}),n.prototype.validate.call(this),this.mapLines.each(function(t){t.validate()})},e.prototype.copyFrom=function(t){this.mapLines.template.copyFrom(t.mapLines.template),n.prototype.copyFrom.call(this,t)},e.prototype.getFeatures=function(){var t=this,i=[];return this.dataItems.each(function(r){var o=r.getFeature();o&&i.push(o)}),this.mapLines.each(function(r){if(-1==t.dataItems.indexOf(r._dataItem)){var o=r.getFeature();o&&i.push(o)}}),i},e.prototype.getLineById=function(t){return Yt.find(this.mapLines.iterator(),function(i){return i.dataItem.dataContext.id==t})},e}(Jt);C.i.registeredClasses.MapLineSeries=Ce,C.i.registeredClasses.MapLineSeriesDataItem=ae;var di=function(n){function e(){var t=n.call(this)||this;return t.className="Graticule",t.applyTheme(),t.shortestDistance=!0,t}return(0,j.ZT)(e,n),e}(oe);function se(n,e,t){n=+n,e=+e,t=(r=arguments.length)<2?(e=n,n=0,1):r<3?1:+t;for(var i=-1,r=0|Math.max(0,Math.ceil((e-n)/t)),o=new Array(r);++i<r;)o[i]=n+i*t;return o}function kr(n,e,t){var i=se(n,e-w,t).concat(e);return function(r){return i.map(function(o){return[r,o]})}}function Yr(n,e,t){var i=se(n,e-w,t).concat(e);return function(r){return i.map(function(o){return[o,r]})}}function gi(){var n,e,t,i,r,o,a,s,c,p,d,g,l=10,h=l,u=90,f=360,m=2.5;function b(){return{type:"MultiLineString",coordinates:M()}}function M(){return se(Wt(i/u)*u,t,u).map(d).concat(se(Wt(s/f)*f,a,f).map(g)).concat(se(Wt(e/l)*l,n,l).filter(function(v){return R(v%u)>w}).map(c)).concat(se(Wt(o/h)*h,r,h).filter(function(v){return R(v%f)>w}).map(p))}return b.lines=function(){return M().map(function(v){return{type:"LineString",coordinates:v}})},b.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(g(a).slice(1),d(t).reverse().slice(1),g(s).reverse().slice(1))]}},b.extent=function(v){return arguments.length?b.extentMajor(v).extentMinor(v):b.extentMinor()},b.extentMajor=function(v){return arguments.length?(s=+v[0][1],a=+v[1][1],(i=+v[0][0])>(t=+v[1][0])&&(v=i,i=t,t=v),s>a&&(v=s,s=a,a=v),b.precision(m)):[[i,s],[t,a]]},b.extentMinor=function(v){return arguments.length?(o=+v[0][1],r=+v[1][1],(e=+v[0][0])>(n=+v[1][0])&&(v=e,e=n,n=v),o>r&&(v=o,o=r,r=v),b.precision(m)):[[e,o],[n,r]]},b.step=function(v){return arguments.length?b.stepMajor(v).stepMinor(v):b.stepMinor()},b.stepMajor=function(v){return arguments.length?(u=+v[0],f=+v[1],b):[u,f]},b.stepMinor=function(v){return arguments.length?(l=+v[0],h=+v[1],b):[l,h]},b.precision=function(v){return arguments.length?(m=+v,c=kr(o,r,90),p=Yr(e,n,m),d=kr(s,a,90),g=Yr(i,t,m),b):m},b.extentMajor([[-180,-90+w],[180,90-w]]).extentMinor([[-180,-80-w],[180,80+w]])}function Ca(){return gi()()}C.i.registeredClasses.Graticule=di;var vi=function(n){function e(){var t=n.call(this)||this;return t.className="GraticuleSeriesDataItem",t.applyTheme(),t}return(0,j.ZT)(e,n),e}(ae),ue=function(n){function e(){var t=n.call(this)||this;return t.className="GraticuleSeries",t.longitudeStep=10,t.latitudeStep=10,t.north=90,t.south=-90,t.east=-180,t.west=180,t.fitExtent=!0,t.singleSprite=!0,t.events.disableType("geoBoundsChanged"),t.mapLines.template.line.strokeOpacity=.08,t.ignoreBounds=!1,t.hiddenInLegend=!0,t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.createDataItem=function(){return new vi},e.prototype.validateData=function(){var t=this;n.prototype.validateData.call(this),this.mapLines.clear();var i=gi();if(i){i.stepMinor([this.longitudeStep,this.latitudeStep]),i.stepMajor([360,360]);var r=this.chart;if(i.extent(this.fitExtent?[[r.east,r.north],[r.west,r.south]]:[[this.east,this.north],[this.west,this.south]]),this.singleSprite)this.mapLines.create().multiLine=i().coordinates;else{var a=i.lines();Pt.each(a,function(s){t.mapLines.create().multiLine=[s.coordinates]})}}},e.prototype.createLine=function(){return new di},Object.defineProperty(e.prototype,"latitudeStep",{get:function(){return this.getPropertyValue("latitudeStep")},set:function(t){this.setPropertyValue("latitudeStep",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitudeStep",{get:function(){return this.getPropertyValue("longitudeStep")},set:function(t){this.setPropertyValue("longitudeStep",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitExtent",{get:function(){return this.getPropertyValue("fitExtent")},set:function(t){this.setPropertyValue("fitExtent",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"singleSprite",{get:function(){return this.getPropertyValue("singleSprite")},set:function(t){this.setPropertyValue("singleSprite",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),e}(Ce);C.i.registeredClasses.GraticuleSeries=ue,C.i.registeredClasses.GraticuleSeriesDataItem=vi;var cn=O(5392),Ea=function(n){function e(){var t=n.call(this)||this;return t.className="MapChartDataItem",t.applyTheme(),t}return(0,j.ZT)(e,n),e}(Gt.c),Xr=function(n){function e(){var t=n.call(this)||this;t.scaleRatio=1,t.zoomDuration=1e3,t.zoomEasing=ba.cubicOut,t.minZoomLevel=1,t.maxZoomLevel=32,t._prevZoomGeoPoint={latitude:0,longitude:0},t.className="MapChart",t.projection=new dt,t.setPropertyValue("deltaLatitude",0),t.setPropertyValue("deltaLongitude",0),t.setPropertyValue("deltaGamma",0),t.maxPanOut=.7,t.homeZoomLevel=1,t.zoomStep=2,t.layout="absolute",t.centerMapOnZoomOut=!0,t.padding(0,0,0,0),st.used(t.backgroundSeries),t.minWidth=10,t.minHeight=10,t.events.once("inited",t.handleAllInited,t,!1);var i=t.seriesContainer;i.visible=!1,i.inert=!0,i.resizable=!0,i.events.on("transformed",t.handleMapTransform,t,!1),i.events.on("doublehit",t.handleDoubleHit,t,!1),i.events.on("dragged",t.handleDrag,t,!1),i.zIndex=0,i.dragWhileResize=!0,i.adapter.add("scale",function(l,h){return T.fitToRange(l,t.minZoomLevel,t.maxZoomLevel)}),t.events.on("maxsizechanged",function(l){(0==l.previousWidth||0==l.previousHeight)&&(t.updateExtremes(),t.updateCenterGeoPoint())},void 0,!1);var r=t.chartContainer;r.parent=t,r.zIndex=-1,t._disposers.push(t.events.on("maxsizechanged",function(){if(t.inited){t._mapAnimation&&t._mapAnimation.stop();var l=!0;t.series.each(function(h){h.updateTooltipBounds(),(!h.inited||h.dataInvalid)&&(l=!1)}),l&&t.updateScaleRatio(),t.zoomToGeoPoint(t._zoomGeoPointReal,t.zoomLevel,!0,0)}},void 0,!1));var o=r.background;o.fillOpacity=0,o.events.on("down",function(l){t.seriesContainer.dragStart(l.target.interactions.downPointers.getIndex(0))},t),o.events.on("up",function(l){t.seriesContainer.dragStop()},t),o.events.on("doublehit",t.handleDoubleHit,t),o.focusable=!0,r.events.on("down",t.handleMapDown,t,!1),t.addDisposer(i.events.on("down",function(){var l=t.seriesContainer.interactions.inertias.getKey("move");l&&l.done()})),t.background.fillOpacity=0,t._disposers.push((0,cn.S)().body.events.on("keyup",function(l){if(t.topParent.hasFocused){var h=ci.d.getEventKey(l.event);if(!t._zoomControl||!t._zoomControl.thumb.isFocused)switch(h){case"up":t.pan({x:0,y:.1});break;case"down":t.pan({x:0,y:-.1});break;case"left":t.pan({x:.1,y:0});break;case"right":t.pan({x:-.1,y:0})}}},t)),t.mouseWheelBehavior="zoom";var a=(0,cn.S)();t._disposers.push(a.body.events.on("down",t.handlePanDown,t)),t._disposers.push(a.body.events.on("up",t.handlePanUp,t));var s=t.seriesContainer.createChild(Sa.C);return s.radius=10,s.inert=!0,s.isMeasured=!1,s.events.on("transformed",t.handlePanMove,t,!1),s.interactionsEnabled=!1,s.opacity=0,s.x=0,s.y=0,t.panSprite=s,t.panBehavior="move",t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.handlePanDown=function(t){var i=st.documentPointToSvg(t.pointer.point,this.htmlContainer);i.x>0&&i.y>0&&i.x<this.svgContainer.width&&i.y<this.svgContainer.height&&(this._downPointOrig=st.documentPointToSprite(t.pointer.point,this.seriesContainer),this.panSprite.moveTo(this._downPointOrig),this.panSprite.dragStart(t.pointer),this._downDeltaLongitude=this.deltaLongitude,this._downDeltaLatitude=this.deltaLatitude)},e.prototype.handlePanUp=function(t){this._downPointOrig&&this.panSprite.dragStop(t.pointer,!0),this._downPointOrig=void 0},e.prototype.handlePanMove=function(){if(!this.seriesContainer.isResized){if((0,cn.S)().areTransformed([this.panSprite.interactions,this.seriesContainer.interactions]))return;var t=this.projection.d3Projection,i=this.panBehavior;if("move"!=i&&"none"!=i&&this._downPointOrig&&t.rotate){var r=t.rotate(),o=r[0],a=r[1],s=r[2];t.rotate([0,0,0]);var l=this.projection.invert(this._downPointOrig),h={x:this.panSprite.pixelX,y:this.panSprite.pixelY},u=void 0;h&&(u=this.projection.invert(h)),t.rotate([o,a,s]),u&&(("rotateLat"==i||"rotateLongLat"==i)&&(this.deltaLatitude=this._downDeltaLatitude+u.latitude-l.latitude),("rotateLong"==i||"rotateLongLat"==i)&&(this.deltaLongitude=this._downDeltaLongitude+u.longitude-l.longitude))}}},e.prototype.handleAllInited=function(){var t=this,i=!0;if(this.seriesContainer.visible=!0,this.series.each(function(o){(!o.inited||o.dataInvalid)&&(i=!1)}),i)this.updateCenterGeoPoint(),this.updateScaleRatio(),this.goHome(0);else{var r=C.i.events.once("exitframe",function(){t.removeDispose(r),t.handleAllInited()},this,!1);this.addDisposer(r)}},e.prototype.updateZoomGeoPoint=function(){var t=st.svgPointToSprite({x:this.innerWidth/2+this.pixelPaddingLeft,y:this.innerHeight/2+this.pixelPaddingTop},this.series.getIndex(0)),i=this.projection.invert(t);this._zoomGeoPointReal=i},e.prototype.updateCenterGeoPoint=function(){var t,i,r,o;if(this.backgroundSeries){var a=this.backgroundSeries.getFeatures();if(a.length>0){var s=this.projection.d3Path.bounds(a[0].geometry);t=s[0][0],r=s[0][1],i=s[1][0],o=s[1][1]}}else this.series.each(function(l){var h=l.group.node.getBBox();(t>h.x||!S.isNumber(t))&&(t=h.x),(i<h.x+h.width||!S.isNumber(i))&&(i=h.x+h.width),(r>h.y||!S.isNumber(r))&&(r=h.y),(o<h.y+h.height||!S.isNumber(o))&&(o=h.y+h.height)});this.seriesMaxLeft=t,this.seriesMaxRight=i,this.seriesMaxTop=r,this.seriesMaxBottom=o,this.seriesWidth=i-t,this.seriesHeight=o-r,this.seriesWidth>0&&this.seriesHeight>0?(this.chartContainer.visible=!0,this._centerGeoPoint=this.projection.invert({x:t+(i-t)/2,y:r+(o-r)/2}),(!this._zoomGeoPointReal||!S.isNumber(this._zoomGeoPointReal.latitude))&&(this._zoomGeoPointReal=this._centerGeoPoint)):this.chartContainer.visible=!1},e.prototype.handleDrag=function(){var t=this.zoomLevel*this.scaleRatio,r=this.seriesHeight*t,o=this.seriesContainer,a=this.seriesMaxLeft*t,s=this.seriesMaxRight*t,l=this.seriesMaxTop*t,h=this.seriesMaxBottom*t,u=o.pixelX,f=o.pixelY,c=this.maxPanOut,p=Math.min(this.maxWidth*(1-c)-this.seriesWidth*t-a,-a);u<p&&(u=p);var d=Math.max(this.maxWidth*c-a,this.maxWidth-s);u>d&&(u=d);var g=Math.min(this.maxHeight*(1-c)-r-l,-l);f<g&&(f=g);var m=Math.max(this.maxHeight*c-l,this.maxHeight-h);f>m&&(f=m),o.moveTo({x:u,y:f},void 0,void 0,!0),this._zoomGeoPointReal=this.zoomGeoPoint},e.prototype.applyInternalDefaults=function(){n.prototype.applyInternalDefaults.call(this),S.hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Map")),S.hasValue(this.background.readerTitle)||(this.background.readerTitle=this.language.translate("Use plus and minus keys on your keyboard to zoom in and out"))},e.prototype.handleMapDown=function(){this._mapAnimation&&this._mapAnimation.stop()},e.prototype.handleDoubleHit=function(t){var i=st.documentPointToSvg(t.point,this.htmlContainer,this.svgContainer.cssScale),r=this.svgPointToGeo(i);this.zoomIn(r)},e.prototype.handleWheel=function(t){var i=this.seriesContainer.interactions.inertias.getKey("move");i&&i.done();var r=st.documentPointToSvg(t.point,this.htmlContainer,this.svgContainer.cssScale),o=this.svgPointToGeo(r);t.shift.y<0?this.zoomIn(o,void 0,this.interactions.mouseOptions.sensitivity):this.zoomOut(o,void 0,this.interactions.mouseOptions.sensitivity)},Object.defineProperty(e.prototype,"mouseWheelBehavior",{get:function(){return this.getPropertyValue("mouseWheelBehavior")},set:function(t){this.setPropertyValue("mouseWheelBehavior",t)&&("none"!=t?(this._mouseWheelDisposer=this.chartContainer.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer)):(this._mouseWheelDisposer&&this._mouseWheelDisposer.dispose(),this.chartContainer.wheelable=!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panBehavior",{get:function(){return this.getPropertyValue("panBehavior")},set:function(t){if(this.setPropertyValue("panBehavior",t)){var i=this.seriesContainer;switch(this.panSprite.draggable=!1,i.draggable=!1,t){case"move":i.draggable=!0;break;default:this.panSprite.draggable=!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerMapOnZoomOut",{get:function(){return this.getPropertyValue("centerMapOnZoomOut")},set:function(t){this.setPropertyValue("centerMapOnZoomOut",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projection",{get:function(){return this.getPropertyValue("projection")},set:function(t){var i=this;this.setPropertyValue("projection",t)&&(this.invalidateProjection(),t.chart=this,this._backgroundSeries&&this._backgroundSeries.invalidate(),this.inited&&this.updateExtremes(),this.series.each(function(r){r.events.once("validated",function(){i.updateCenterGeoPoint(),i.updateScaleRatio(),i.goHome(0)})}))},enumerable:!0,configurable:!0}),e.prototype.validateDataItems=function(){n.prototype.validateDataItems.call(this),this.updateExtremes()},e.prototype.updateExtremes=function(){var t,i,r,o;this.series.each(function(M){M.ignoreBounds||M instanceof ue&&M.fitExtent||((M.north>i||!S.isNumber(i))&&(i=M.north),(M.south<o||!S.isNumber(o))&&(o=M.south),(M.west<r||!S.isNumber(r))&&(r=M.west),(M.east>t||!S.isNumber(t))&&(t=M.east))});var a=[],s=!1;this.series.each(function(M){M instanceof ue&&!M.fitExtent&&(a=M.getFeatures(),s=!0)}),s||this.series.each(function(M){M.ignoreBounds||M instanceof ue&&M.fitExtent||(a=a.concat(M.getFeatures()))});var l=T.max(50,this.innerWidth),h=T.max(50,this.innerHeight),u=this.projection.d3Projection;if(a.length>0&&u&&(this.east!=t||this.west!=r||this.north!=i||this.south!=o)){if(this.east=t,this.west=r,this.north=i,this.south=o,u.rotate){var f=u.rotate(),p=f[1],d=f[2];this.deltaLongitude=f[0],this.deltaLatitude=p,this.deltaGamma=d}var g={type:"FeatureCollection",features:a},m=u.scale();if(u.fitSize([l,h],g),u.scale()!=m&&this.invalidateDataUsers(),this.series.each(function(M){M instanceof ue&&M.invalidateData()}),this._backgroundSeries){var b=this._backgroundSeries.mapPolygons.getIndex(0);b&&(b.multiPolygon=hr(this.north,this.east,this.south,this.west))}this._fitWidth=l,this._fitHeight=h}(!this._zoomGeoPointReal||!S.isNumber(this._zoomGeoPointReal.latitude))&&this.goHome(0)},e.prototype.updateScaleRatio=function(){var t;this.updateCenterGeoPoint(),t=T.min(this.innerWidth/this.seriesWidth,this.innerHeight/this.seriesHeight),(S.isNaN(t)||t==1/0)&&(t=1),t!=this.scaleRatio&&(this.scaleRatio=t,Yt.each(this.series.iterator(),function(o){o.scale=t,o.updateTooltipBounds()}),this.backgroundSeries.scale=t,this.dispatch("scaleratiochanged"))},e.prototype.svgPointToGeo=function(t){var i=this.series.getIndex(0);if(i){var r=st.svgPointToSprite(t,i);return this.seriesPointToGeo(r)}},e.prototype.geoPointToSVG=function(t){var i=this.series.getIndex(0);if(i){var r=this.geoPointToSeries(t);return st.spritePointToSvg(r,i)}},e.prototype.seriesPointToGeo=function(t){return this.projection.invert(t)},e.prototype.geoPointToSeries=function(t){return this.projection.convert(t)},Object.defineProperty(e.prototype,"geodata",{get:function(){return this._geodata},set:function(t){t!=this._geodata&&(this._geodata=t,this.reverseGeodata&&this.processReverseGeodata(this._geodata),this.invalidateData(),this.dataUsers.each(function(i){for(var r=i.data.length-1;r>=0;r--)1==i.data[r].madeFromGeoData&&i.data.splice(r,1);i.disposeData(),i.invalidateData()}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverseGeodata",{get:function(){return this.getPropertyValue("reverseGeodata")},set:function(t){this.setPropertyValue("reverseGeodata",t)&&this._geodata&&this.processReverseGeodata(this._geodata)},enumerable:!0,configurable:!0}),e.prototype.processReverseGeodata=function(t){for(var i=0;i<t.features.length;i++)for(var r=t.features[i],o=0;o<r.geometry.coordinates.length;o++)if("MultiPolygon"==r.geometry.type)for(var a=0;a<r.geometry.coordinates[o].length;a++)r.geometry.coordinates[o][a].reverse();else r.geometry.coordinates[o].reverse()},e.prototype.zoomToGeoPoint=function(t,i,r,o,a){var s=this;if(!t){var l=!1;if(this.series.each(function(d){d.dataItems.length>0&&(l=!0)}),!l)return;t=this.zoomGeoPoint}if(t&&S.isNumber(t.longitude)&&S.isNumber(t.latitude)){this._zoomGeoPointReal=t,i=T.fitToRange(i,this.minZoomLevel,this.maxZoomLevel);var h=this.projection.convert(t);if(h){var u=this.geoPointToSVG(t),f=st.svgPointToSprite(u,this);r&&(f={x:this.innerWidth/2,y:this.innerHeight/2}),S.isNumber(o)||(o=this.zoomDuration);var c=f.x-h.x*i*this.scaleRatio,p=f.y-h.y*i*this.scaleRatio;return!a&&i<this.zoomLevel&&this.centerMapOnZoomOut&&i<1.5&&(c=this.innerWidth/2-(this.seriesMaxLeft+(this.seriesMaxRight-this.seriesMaxLeft)/2)*i*this.scaleRatio,p=this.innerHeight/2-(this.seriesMaxTop+(this.seriesMaxBottom-this.seriesMaxTop)/2)*i*this.scaleRatio),this._mapAnimation=this.seriesContainer.animate([{property:"scale",to:i},{property:"x",from:this.seriesContainer.pixelX,to:c},{property:"y",from:this.seriesContainer.pixelY,to:p}],o,this.zoomEasing),this._disposers.push(this._mapAnimation.events.on("animationended",function(){s._zoomGeoPointReal=s.zoomGeoPoint})),this.seriesContainer.validatePosition(),this._mapAnimation}}},e.prototype.zoomToMapObject=function(t,i,r,o){null==r&&(r=!0);var a=this.seriesContainer.interactions.inertias.getKey("move");if(a&&a.done(),t instanceof de)return S.isNaN(i)&&(i=5),this.zoomToGeoPoint({latitude:t.latitude,longitude:t.longitude},i,r,o,!0);var s=t.dataItem;if(s&&S.isNumber(s.zoomLevel)&&(i=s.zoomLevel),t instanceof Qe){var l=t.dataItem,h=t.polygon.bbox;(0==h.width||0==h.height)&&(h=t.polygon.group.getBBox()),S.isNumber(i)||(i=Math.min(this.seriesWidth/h.width,this.seriesHeight/h.height));var u=void 0;if(l&&S.hasValue(l.zoomGeoPoint))u=l.zoomGeoPoint;else{var c=st.spritePointToSprite({x:h.x+h.width/2,y:h.y+h.height/2},t.polygon,t.series);u=this.seriesPointToGeo(c)}return this.zoomToGeoPoint(u,i,!0,o,!0)}},e.prototype.zoomToRectangle=function(t,i,r,o,a,s,l){S.isNaN(a)&&(a=1);var h=T.min(o,i),u=T.max(o,i);o=h,i=u;var f=T.normalizeAngle(180-this.deltaLongitude);f>180&&(f-=360);var c=o+(i-o)/2,p=o-i;o<f&&i>f&&(c+=180,p=T.normalizeAngle(i-o-360));var d=a*Math.min((this.south-this.north)/(r-t),Math.abs((this.west-this.east)/p));return this.zoomToGeoPoint({latitude:t+(r-t)/2,longitude:c},d,s,l,!0)},e.prototype.zoomIn=function(t,i,r){void 0===r&&(r=1);var o=1+(this.zoomStep-1)*r;return o<1&&(o=1),this.zoomToGeoPoint(t,this.zoomLevel*o,!1,i)},e.prototype.zoomOut=function(t,i,r){void 0===r&&(r=1);var o=1+(this.zoomStep-1)*r;return o<1&&(o=1),this.zoomToGeoPoint(t,this.zoomLevel/o,!1,i)},e.prototype.pan=function(t,i){var r=this.geoPointToSVG(this.zoomGeoPoint);r.x+=this.pixelWidth*t.x,r.y+=this.pixelHeight*t.y,this.zoomToGeoPoint(this.svgPointToGeo(r),this.zoomLevel,!0,i,!0)},Object.defineProperty(e.prototype,"zoomGeoPoint",{get:function(){var t=st.spritePointToSvg({x:this.pixelWidth/2,y:this.pixelHeight/2},this);return this.svgPointToGeo(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomLevel",{get:function(){return this.seriesContainer.scale},set:function(t){this.seriesContainer.scale=t},enumerable:!0,configurable:!0}),e.prototype.handleMapTransform=function(){this.zoomLevel!=this._prevZoomLevel&&(this.dispatch("zoomlevelchanged"),this._prevZoomLevel=this.zoomLevel,this.svgContainer.readerAlert(this.language.translate("Zoom level changed to %1",this.language.locale,S.castString(this.zoomLevel)))),this.zoomGeoPoint&&(this._prevZoomGeoPoint.latitude!=this.zoomGeoPoint.latitude||this._prevZoomGeoPoint.longitude!=this.zoomGeoPoint.longitude)&&this.dispatch("mappositionchanged")},Object.defineProperty(e.prototype,"smallMap",{get:function(){if(!this._smallMap){var t=new hi;this.smallMap=t}return this._smallMap},set:function(t){this._smallMap&&this.removeDispose(this._smallMap),this._smallMap=t,this._smallMap.chart=this,t.parent=this.chartContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomControl",{get:function(){return this._zoomControl},set:function(t){this._zoomControl&&this.removeDispose(this._zoomControl),this._zoomControl=t,t.chart=this,t.parent=this.chartContainer,t.plusButton.exportable=!1,t.minusButton.exportable=!1},enumerable:!0,configurable:!0}),e.prototype.createSeries=function(){return new Jt},Object.defineProperty(e.prototype,"deltaLongitude",{get:function(){return this.getPropertyValue("deltaLongitude")},set:function(t){t=T.round(t,3),this.setPropertyValue("deltaLongitude",we(t))&&(this.rotateMap(),this.updateZoomGeoPoint())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaLatitude",{get:function(){return this.getPropertyValue("deltaLatitude")},set:function(t){t=T.round(t,3),this.setPropertyValue("deltaLatitude",t)&&(this.rotateMap(),this.updateZoomGeoPoint())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaGamma",{get:function(){return this.getPropertyValue("deltaGamma")},set:function(t){t=T.round(t,3),this.setPropertyValue("deltaGamma",t)&&(this.rotateMap(),this.updateZoomGeoPoint())},enumerable:!0,configurable:!0}),e.prototype.rotateMap=function(){this.projection.d3Projection&&this.projection.d3Projection.rotate&&(this.projection.d3Projection.rotate([this.deltaLongitude,this.deltaLatitude,this.deltaGamma]),this.invalidateProjection())},Object.defineProperty(e.prototype,"maxPanOut",{get:function(){return this.getPropertyValue("maxPanOut")},set:function(t){this.setPropertyValue("maxPanOut",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"homeGeoPoint",{get:function(){return this.getPropertyValue("homeGeoPoint")},set:function(t){this.setPropertyValue("homeGeoPoint",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"homeZoomLevel",{get:function(){return this.getPropertyValue("homeZoomLevel")},set:function(t){this.setPropertyValue("homeZoomLevel",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomStep",{get:function(){return this.getPropertyValue("zoomStep")},set:function(t){this.setPropertyValue("zoomStep",t)},enumerable:!0,configurable:!0}),e.prototype.invalidateProjection=function(){this.east=void 0,this.invalidateDataUsers(),this.updateCenterGeoPoint()},Object.defineProperty(e.prototype,"geodataSource",{get:function(){var t=this;return this._dataSources.geodata||this.getDataSource("geodata").events.on("parseended",function(){t.events.once("datavalidated",function(){t.goHome(0)})}),this._dataSources.geodata},set:function(t){var i=this;this._dataSources.geodata&&this.removeDispose(this._dataSources.geodata),this._dataSources.geodata=t,this._dataSources.geodata.component=this,this.events.on("inited",function(){i.loadData("geodata")},this,!1),this.setDataSourceEvents(t,"geodata")},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(t){if(S.hasValue(t.geodata)&&S.isString(t.geodata)){var i=t.geodata;if(S.hasValue(window["am4geodata_"+t.geodata]))t.geodata=window["am4geodata_"+t.geodata];else try{t.geodata=JSON.parse(t.geodata)}catch(r){this.raiseCriticalError(Error("MapChart error: Geodata `"+i+"` is not loaded or is incorrect."),!0)}}S.hasValue(t.projection)&&S.isString(t.projection)&&(t.projection=this.createClassInstance(t.projection)),S.hasValue(t.smallMap)&&!S.hasValue(t.smallMap.type)&&(t.smallMap.type="SmallMap"),S.hasValue(t.zoomControl)&&!S.hasValue(t.zoomControl.type)&&(t.zoomControl.type="ZoomControl"),n.prototype.processConfig.call(this,t)},e.prototype.handleSeriesAdded=function(t){n.prototype.handleSeriesAdded.call(this,t);var i=t.newValue;i.scale=this.scaleRatio,i.events.on("validated",this.updateCenterGeoPoint,this,!1)},e.prototype.configOrder=function(t,i){return t==i?0:"smallMap"==t?1:"smallMap"==i?-1:"series"==t?1:"series"==i?-1:n.prototype.configOrder.call(this,t,i)},e.prototype.asIs=function(t){return"projection"==t||"geodata"==t||n.prototype.asIs.call(this,t)},Object.defineProperty(e.prototype,"centerGeoPoint",{get:function(){return this._centerGeoPoint},enumerable:!0,configurable:!0}),e.prototype.goHome=function(t){var i=this.homeGeoPoint;i||(i=this.centerGeoPoint),i&&this.zoomToGeoPoint(i,this.homeZoomLevel,!0,t,!0)},e.prototype.setPaper=function(t){return this.svgContainer&&(this.svgContainer.hideOverflow=!0),n.prototype.setPaper.call(this,t)},Object.defineProperty(e.prototype,"backgroundSeries",{get:function(){var t=this;if(!this._backgroundSeries){var i=new Bn;i.parent=this.seriesContainer,i.chart=this,i.hiddenInLegend=!0,i.mapPolygons.template.focusable=!1,i.addDisposer(new N.ku(function(){t._backgroundSeries=void 0})),this._disposers.push(i);var o=(new _.h).getFor("background"),a=i.mapPolygons.template.polygon;a.stroke=o,a.fill=o,a.fillOpacity=0,a.strokeOpacity=0,i.mapPolygons.create(),this._backgroundSeries=i}return this._backgroundSeries},enumerable:!0,configurable:!0}),e.prototype.setLegend=function(t){n.prototype.setLegend.call(this,t),t&&(t.parent=this)},e.prototype.setTapToActivate=function(t){n.prototype.setTapToActivate.call(this,t),this.seriesContainer.interactions.isTouchProtected=!0,this.panSprite.interactions.isTouchProtected=!0},e.prototype.handleTapToActivate=function(){n.prototype.handleTapToActivate.call(this),this.seriesContainer.interactions.isTouchProtected=!1,this.panSprite.interactions.isTouchProtected=!1},e.prototype.handleTapToActivateDeactivation=function(){n.prototype.handleTapToActivateDeactivation.call(this),this.seriesContainer.interactions.isTouchProtected=!0,this.panSprite.interactions.isTouchProtected=!0},e.prototype.asFunction=function(t){return"zoomEasing"==t||n.prototype.asIs.call(this,t)},e.prototype.hasLicense=function(){if(fi.Y.commercialLicense)return!0;if(!n.prototype.hasLicense.call(this))return!1;for(var t=0;t<fi.Y.licenses.length;t++)if(fi.Y.licenses[t].match(/^MP.{5,}/i))return!0;return!1},e}(Gt.j);C.i.registeredClasses.MapChart=Xr;var Ta=O(3265),mi=function(n){function e(){var t=n.call(this)||this;return t.className="MapSpline",t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.createLine=function(){this.line=new Ta.o,this.line.tensionX=.8,this.line.tensionY=.8},Object.defineProperty(e.prototype,"shortestDistance",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),e}(oe);C.i.registeredClasses.MapSpline=mi;var Ia=O(1876),yi=function(n){function e(){var t=n.call(this)||this;return t.className="MapArc",t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.createLine=function(){this.line=new Ia.y},Object.defineProperty(e.prototype,"shortestDistance",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),e}(oe);C.i.registeredClasses.MapArc=yi;var Pi=function(n){function e(){var t=n.call(this)||this;return t.className="MapSplineSeriesDataItem",t.applyTheme(),t}return(0,j.ZT)(e,n),e}(ae),Qr=function(n){function e(){var t=n.call(this)||this;return t.className="MapSplineSeries",t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.createDataItem=function(){return new Pi},e.prototype.createLine=function(){return new mi},e}(Ce);C.i.registeredClasses.MapSplineSeries=Qr,C.i.registeredClasses.MapSplineSeriesDataItem=Pi;var Si=function(n){function e(){var t=n.call(this)||this;return t.className="MapArcSeriesDataItem",t.applyTheme(),t}return(0,j.ZT)(e,n),e}(ae),Ur=function(n){function e(){var t=n.call(this)||this;return t.className="MapArcSeries",t.applyTheme(),t}return(0,j.ZT)(e,n),e.prototype.createDataItem=function(){return new Si},e.prototype.createLine=function(){return new yi},e}(Ce);C.i.registeredClasses.MapArcSeries=Ur,C.i.registeredClasses.MapArcSeriesDataItem=Si;var Mi=O(5533),Da=O(1e3),Kr=function(n){function e(){var t=n.call(this)||this;t._chart=new N.cx,t.className="ZoomControl",t.align="right",t.valign="bottom",t.layout="vertical",t.padding(5,5,5,5);var i=new _.h,r=t.createChild(Mi.z);r.shouldClone=!1,r.label.text="+",t.plusButton=r;var o=t.createChild(te.W);o.shouldClone=!1,o.background.fill=i.getFor("alternativeBackground"),o.background.fillOpacity=.05,o.background.events.on("hit",t.handleBackgroundClick,t,!1),o.events.on("sizechanged",t.updateThumbSize,t,!1),t.slider=o;var a=o.createChild(Mi.z);a.shouldClone=!1,a.padding(0,0,0,0),a.draggable=!0,a.events.on("drag",t.handleThumbDrag,t,!1),t.thumb=a;var s=t.createChild(Mi.z);return s.shouldClone=!1,s.label.text="-",t.minusButton=s,t.thumb.role="slider",t.thumb.readerLive="polite",t.thumb.readerTitle=t.language.translate("Use arrow keys to zoom in and out"),t.minusButton.readerTitle=t.language.translate("Press ENTER to zoom in"),t.plusButton.readerTitle=t.language.translate("Press ENTER to zoom out"),t.applyTheme(),t.events.on("propertychanged",function(l){"layout"==l.property&&t.fixLayout()},void 0,!1),t._disposers.push(t._chart),t.fixLayout(),t}return(0,j.ZT)(e,n),e.prototype.fixLayout=function(){var t=this.plusButton,i=this.minusButton,r=this.thumb,o=this.slider;t.x=void 0,t.y=void 0,i.x=void 0,i.y=void 0,r.x=void 0,r.y=void 0,o.x=void 0,o.y=void 0,t.padding(6,10,6,10),i.padding(6,10,6,10),i.label.align="center",i.label.valign="middle",t.label.align="center",t.label.valign="middle","vertical"==this.layout?(this.width=40,this.height=void 0,i.width=(0,ut.aQ)(100),i.height=void 0,r.width=(0,ut.aQ)(100),r.height=void 0,t.width=(0,ut.aQ)(100),t.height=void 0,o.width=(0,ut.aQ)(100),i.marginTop=1,t.marginBottom=2,o.height=0,i.toFront(),t.toBack(),r.minX=0,r.maxX=0,r.minY=0):"horizontal"==this.layout&&(this.height=40,this.width=void 0,i.height=(0,ut.aQ)(100),i.width=void 0,t.height=(0,ut.aQ)(100),t.width=void 0,r.height=(0,ut.aQ)(100),r.width=void 0,r.minX=0,r.minY=0,r.maxY=0,o.height=(0,ut.aQ)(100),o.width=0,i.toBack(),t.toFront())},e.prototype.handleBackgroundClick=function(t){var i=t.target,r=t.spritePoint.y,o=this.chart,a=Math.log(o.maxZoomLevel)/Math.LN2,s=Math.log(o.minZoomLevel)/Math.LN2,h=Math.pow(2,(i.pixelHeight-r)/i.pixelHeight*(s+(a-s)));o.zoomToGeoPoint(o.zoomGeoPoint,h)},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){var i=this;this._chart.set(t,new N.FV([t.events.on("maxsizechanged",this.updateThumbSize,this,!1),t.events.on("zoomlevelchanged",this.updateThumb,this,!1),this.minusButton.events.on("hit",function(){t.zoomOut(t.zoomGeoPoint)},t,!1),(0,cn.S)().body.events.on("keyup",function(r){i.topParent.hasFocused&&(ci.d.isKey(r.event,"plus")?t.zoomIn():ci.d.isKey(r.event,"minus")&&t.zoomOut())},t),this.plusButton.events.on("hit",function(){t.zoomIn(t.zoomGeoPoint)},t,!1)]))},enumerable:!0,configurable:!0}),e.prototype.updateThumbSize=function(){if(this.chart){var i=this.slider,r=this.thumb;"vertical"==this.layout?(r.minHeight=Math.min(this.slider.pixelHeight,20),r.height=i.pixelHeight/this.stepCount,r.maxY=i.pixelHeight-r.pixelHeight,r.visible=!(r.pixelHeight<=1)):(r.minWidth=Math.min(this.slider.pixelWidth,20),r.width=i.pixelWidth/this.stepCount,r.maxX=i.pixelWidth-r.pixelWidth,r.visible=!(r.pixelWidth<=1))}},e.prototype.updateThumb=function(){var t=this.slider,r=this.thumb;if(!r.isDown){var o=(Math.log(this.chart.zoomLevel)-Math.log(this.chart.minZoomLevel))/Math.LN2;"vertical"==this.layout?r.y=t.pixelHeight-(t.pixelHeight-r.pixelHeight)*o/this.stepCount-r.pixelHeight:r.x=t.pixelWidth*o/this.stepCount}},e.prototype.handleThumbDrag=function(){var o,t=this.slider,i=this.chart,r=this.thumb;o=Math.log(this.chart.minZoomLevel)/Math.LN2+(o="vertical"==this.layout?this.stepCount*(t.pixelHeight-r.pixelY-r.pixelHeight)/(t.pixelHeight-r.pixelHeight):this.stepCount*r.pixelX/t.pixelWidth);var s=Math.pow(2,o);i.zoomToGeoPoint(void 0,s,!1,0)},Object.defineProperty(e.prototype,"stepCount",{get:function(){return Math.log(this.chart.maxZoomLevel)/Math.LN2-Math.log(this.chart.minZoomLevel)/Math.LN2},enumerable:!0,configurable:!0}),e.prototype.createBackground=function(){return new Da.c},e}(te.W);function Ee(n,e){return[n,Ae(En((V+e)/2))]}function qr(){return $r(Ee).scale(961/Q)}function $r(n){var s,l,h,e=Mt(n),t=e.center,i=e.scale,r=e.translate,o=e.clipExtent,a=null;function u(){var f=G*i(),c=e(or(e.rotate()).invert([0,0]));return o(null==a?[[c[0]-f,c[1]-f],[c[0]+f,c[1]+f]]:n===Ee?[[Math.max(c[0]-f,a),s],[Math.min(c[0]+f,l),h]]:[[a,Math.max(c[1]-f,s)],[l,Math.min(c[1]+f,h)]])}return e.scale=function(f){return arguments.length?(i(f),u()):i()},e.translate=function(f){return arguments.length?(r(f),u()):r()},e.center=function(f){return arguments.length?(t(f),u()):t()},e.clipExtent=function(f){return arguments.length?(null==f?a=s=l=h=null:(a=+f[0][0],s=+f[0][1],l=+f[1][0],h=+f[1][1]),u()):null==a?null:[[a,s],[l,h]]},u()}C.i.registeredClasses.ZoomControl=Kr,Ee.invert=function(n,e){return[n,2*jt(Fi(e))-V]};var Jr=function(n){function e(){var t=n.call(this)||this;return t.d3Projection=qr(),t}return(0,j.ZT)(e,n),e}(dt);C.i.registeredClasses.Mercator=Jr;var Ga=Math.abs,ja=Math.atan,bi=(Math,Math,Math.cos),le=Math.exp,Li=(Math,Math.log),xi=(Math,Math,Math,Math,Math,Math.sin),Oa=Math.tan,Nt=Math.PI,fn=Nt/2,za=Nt/4;function Na(n){return n>1?fn:n<-1?-fn:Math.asin(n)}function he(n){return n>0?Math.sqrt(n):0}function to(n,e){return[n,1.25*Li(Oa(za+.4*e))]}Math,he(2),he(Nt),to.invert=function(n,e){return[n,2.5*ja(le(.8*e))-.625*Nt]};var eo=function(n){function e(){var t=n.call(this)||this;return t.d3Projection=Mt(to).scale(108.318),t}return(0,j.ZT)(e,n),e}(dt);function no(n,e){for(var t=(1+fn)*xi(e),i=0,r=1/0;i<10&&Ga(r)>1e-6;i++)e-=r=(e+xi(e)-t)/(1+bi(e));return t=he(2+Nt),[n*(1+bi(e))/t,2*e/t]}C.i.registeredClasses.Miller=eo,no.invert=function(n,e){var t=1+fn,i=he(t/2);return[2*n*i/(1+bi(e*=i)),Na((e+xi(e))/t)]};var io=function(n){function e(){var t=n.call(this)||this;return t.d3Projection=Mt(no).scale(173.044),t}return(0,j.ZT)(e,n),e}(dt);function ro(n){return function(e,t){var i=L(e),r=L(t),o=n(i*r);return o===1/0?[2,0]:[o*r*x(e),o*x(t)]}}function Te(n){return function(e,t){var i=ot(e*e+t*t),r=n(i),o=x(r),a=L(r);return[rt(e*o,i*a),lt(i&&t*o/i)]}}function wi(n,e){return[L(e)*x(n),x(e)]}function oo(){return Mt(wi).scale(249.5).clipAngle(90+w)}C.i.registeredClasses.Eckert6=io,wi.invert=Te(lt);var ao=function(n){function e(){var t=n.call(this)||this;return t.d3Projection=oo(),t}return(0,j.ZT)(e,n),e}(dt);function Ci(n,e){var t=L(e),i=1+L(n)*t;return[t*x(n)/i,x(e)/i]}function so(){return Mt(Ci).scale(250).clipAngle(142)}C.i.registeredClasses.Orthographic=ao,Ci.invert=Te(function(n){return 2*jt(n)});var uo=function(n){function e(){var t=n.call(this)||this;return t.d3Projection=so(),t}return(0,j.ZT)(e,n),e}(dt);function Ei(n){var e=0,t=G/3,i=Kn(n),r=i(e,t);return r.parallels=function(o){return arguments.length?i(e=o[0]*I,t=o[1]*I):[e*B,t*B]},r}function lo(n,e){var t=x(n),i=(t+x(e))/2;if(R(i)<w)return function(n){var e=L(n);function t(i,r){return[i*e,x(r)/e]}return t.invert=function(i,r){return[i/e,lt(r*e)]},t}(n);var r=1+t*(2*i-t),o=ot(r)/i;function a(s,l){var h=ot(r-2*i*x(l))/i;return[h*x(s*=i),o-h*L(s)]}return a.invert=function(s,l){var h=o-l,u=rt(s,R(h))*St(h);return h*i<0&&(u-=G*St(s)*St(h)),[u/i,lt((r-(s*s+h*h)*i*i)/(2*i))]},a}function pn(){return Ei(lo).scale(155.424).center([0,33.6442])}function Ti(){return pn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}C.i.registeredClasses.Stereographic=uo;var ho=function(n){function e(){var t=n.call(this)||this;return t.d3Projection=Ti(),t}return(0,j.ZT)(e,n),e}(dt);function co(){var n,e,i,o,s,l,t=Ti(),r=pn().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=pn().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(c,p){l=[c,p]}};function u(c){var p=c[0],d=c[1];return l=null,i.point(p,d),l||(o.point(p,d),l)||(s.point(p,d),l)}function f(){return n=e=null,u}return u.invert=function(c){var p=t.scale(),d=t.translate(),g=(c[0]-d[0])/p,m=(c[1]-d[1])/p;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?r:m>=.166&&m<.234&&g>=-.214&&g<-.115?a:t).invert(c)},u.stream=function(c){return n&&e===c?n:n=function(n){var e=n.length;return{point:function(t,i){for(var r=-1;++r<e;)n[r].point(t,i)},sphere:function(){for(var t=-1;++t<e;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<e;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<e;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<e;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<e;)n[t].polygonEnd()}}}([t.stream(e=c),r.stream(c),a.stream(c)])},u.precision=function(c){return arguments.length?(t.precision(c),r.precision(c),a.precision(c),f()):t.precision()},u.scale=function(c){return arguments.length?(t.scale(c),r.scale(.35*c),a.scale(c),u.translate(t.translate())):t.scale()},u.translate=function(c){if(!arguments.length)return t.translate();var p=t.scale(),d=+c[0],g=+c[1];return i=t.translate(c).clipExtent([[d-.455*p,g-.238*p],[d+.455*p,g+.238*p]]).stream(h),o=r.translate([d-.307*p,g+.201*p]).clipExtent([[d-.425*p+w,g+.12*p+w],[d-.214*p-w,g+.234*p-w]]).stream(h),s=a.translate([d-.205*p,g+.212*p]).clipExtent([[d-.214*p+w,g+.166*p+w],[d-.115*p-w,g+.234*p-w]]).stream(h),f()},u.fitExtent=function(c,p){return nn(u,c,p)},u.fitSize=function(c,p){return Xn(u,c,p)},u.fitWidth=function(c,p){return Qn(u,c,p)},u.fitHeight=function(c,p){return Un(u,c,p)},u.scale(1070)}C.i.registeredClasses.Albers=ho;var fo=function(n){function e(){var t=n.call(this)||this;return t.d3Projection=co(),t}return(0,j.ZT)(e,n),e}(dt);function Ii(n,e){var t=e*e,i=t*t;return[n*(.8707-.131979*t+i*(i*(.003971*t-.001529*i)-.013791)),e*(1.007226+t*(.015085+i*(.028874*t-.044475-.005916*i)))]}function po(){return Mt(Ii).scale(175.295)}C.i.registeredClasses.AlbersUsa=fo,Ii.invert=function(n,e){var r,t=e,i=25;do{var o=t*t,a=o*o;t-=r=(t*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(R(r)>w&&--i>0);return[n/(.8707+(o=t*t)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),t]};var go=function(n){function e(){var t=n.call(this)||this;return t.d3Projection=po(),t}return(0,j.ZT)(e,n),e}(dt);C.i.registeredClasses.NaturalEarth1=go;var Di=ro(function(n){return ot(2/(1+n))});function vo(){return Mt(Di).scale(124.75).clipAngle(179.999)}Di.invert=Te(function(n){return 2*lt(n/2)});var mo=function(n){function e(){var t=n.call(this)||this;return t.d3Projection=vo(),t}return(0,j.ZT)(e,n),e}(dt);C.i.registeredClasses.AzimuthalEqualArea=mo;var Ie=1.340264,De=-.081106,Ge=893e-6,je=.003796,dn=ot(3)/2;function Gi(n,e){var t=lt(dn*x(e)),i=t*t,r=i*i*i;return[n*L(t)/(dn*(Ie+3*De*i+r*(7*Ge+9*je*i))),t*(Ie+De*i+r*(Ge+je*i))]}function yo(){return Mt(Gi).scale(177.158)}Gi.invert=function(n,e){for(var a,t=e,i=t*t,r=i*i*i,o=0;o<12&&(r=(i=(t-=a=(t*(Ie+De*i+r*(Ge+je*i))-e)/(Ie+3*De*i+r*(7*Ge+9*je*i)))*t)*i*i,!(R(a)<it));++o);return[dn*n*(Ie+3*De*i+r*(7*Ge+9*je*i))/L(t),lt(x(t)/dn)]};var Po=function(n){function e(){var t=n.call(this)||this;return t.d3Projection=yo(),t}return(0,j.ZT)(e,n),e}(dt);C.i.registeredClasses.EqualEarth=Po;var Oe,gn,vn,mn,yn,Pn,Sn,Mn,ji,Oi,Ri,So,Mo,ht,ct,ft,wt={sphere:K,point:zi,lineStart:bo,lineEnd:Lo,polygonStart:function(){wt.lineStart=Ha,wt.lineEnd=ka},polygonEnd:function(){wt.lineStart=bo,wt.lineEnd=Lo}};function zi(n,e){n*=I;var t=L(e*=I);Re(t*L(n),t*x(n),x(e))}function Re(n,e,t){++Oe,vn+=(n-vn)/Oe,mn+=(e-mn)/Oe,yn+=(t-yn)/Oe}function bo(){wt.point=Ba}function Ba(n,e){n*=I;var t=L(e*=I);ht=t*L(n),ct=t*x(n),ft=x(e),wt.point=Wa,Re(ht,ct,ft)}function Wa(n,e){n*=I;var t=L(e*=I),i=t*L(n),r=t*x(n),o=x(e),a=rt(ot((a=ct*o-ft*r)*a+(a=ft*i-ht*o)*a+(a=ht*r-ct*i)*a),ht*i+ct*r+ft*o);gn+=a,Pn+=a*(ht+(ht=i)),Sn+=a*(ct+(ct=r)),Mn+=a*(ft+(ft=o)),Re(ht,ct,ft)}function Lo(){wt.point=zi}function Ha(){wt.point=Ya}function ka(){xo(So,Mo),wt.point=zi}function Ya(n,e){So=n,Mo=e,n*=I,e*=I,wt.point=xo;var t=L(e);ht=t*L(n),ct=t*x(n),ft=x(e),Re(ht,ct,ft)}function xo(n,e){n*=I;var t=L(e*=I),i=t*L(n),r=t*x(n),o=x(e),a=ct*o-ft*r,s=ft*i-ht*o,l=ht*r-ct*i,h=wn(a,s,l),u=lt(h),f=h&&-u/h;ji.add(f*a),Oi.add(f*s),Ri.add(f*l),gn+=u,Pn+=u*(ht+(ht=i)),Sn+=u*(ct+(ct=r)),Mn+=u*(ft+(ft=o)),Re(ht,ct,ft)}function Xa(n){Oe=gn=vn=mn=yn=Pn=Sn=Mn=0,ji=new A,Oi=new A,Ri=new A,Lt(n,wt);var e=+ji,t=+Oi,i=+Ri,r=wn(e,t,i);return r<it&&(e=Pn,t=Sn,i=Mn,gn<w&&(e=vn,t=mn,i=yn),(r=wn(e,t,i))<it)?[NaN,NaN]:[rt(t,e)*B,lt(i/r)*B]}function Qa(){var r,o,a,n=0,e=0,t=960,i=500;return a={stream:function(s){return r&&o===s?r:r=$e(n,e,t,i)(o=s)},extent:function(s){return arguments.length?(n=+s[0][0],e=+s[0][1],t=+s[1][0],i=+s[1][1],r=o=null,a):[[n,e],[t,i]]}}}var wo={Feature:function(n,e){return bn(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,r=t.length;++i<r;)if(bn(t[i].geometry,e))return!0;return!1}},Co={Sphere:function(){return!0},Point:function(n,e){return Eo(n.coordinates,e)},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(Eo(t[i],e))return!0;return!1},LineString:function(n,e){return To(n.coordinates,e)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(To(t[i],e))return!0;return!1},Polygon:function(n,e){return Io(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(Io(t[i],e))return!0;return!1},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,r=t.length;++i<r;)if(bn(t[i],e))return!0;return!1}};function bn(n,e){return!(!n||!Co.hasOwnProperty(n.type))&&Co[n.type](n,e)}function Eo(n,e){return 0===xe(n,e)}function To(n,e){for(var t,i,r,o=0,a=n.length;o<a;o++){if(0===(i=xe(n[o],e))||o>0&&(r=xe(n[o],n[o-1]))>0&&t<=r&&i<=r&&(t+i-r)*(1-Math.pow((t-i)/r,2))<it*r)return!0;t=i}return!1}function Io(n,e){return!!dr(n.map(Ua),Do(e))}function Ua(n){return(n=n.map(Do)).pop(),n}function Do(n){return[n[0]*I,n[1]*I]}function Ka(n,e){return(n&&wo.hasOwnProperty(n.type)?wo[n.type]:bn)(n,e)}var Ni=ro(function(n){return(n=_i(n))&&n/x(n)});function qa(){return Mt(Ni).scale(79.4188).clipAngle(179.999)}function Ln(n){return En((V+n)/2)}function Go(n,e){var t=L(n),i=n===e?x(n):Ae(t/L(e))/Ae(Ln(e)/Ln(n)),r=t*Cn(Ln(n),i)/i;if(!i)return Ee;function o(a,s){r>0?s<-V+w&&(s=-V+w):s>V-w&&(s=V-w);var l=r/Cn(Ln(s),i);return[l*x(i*a),r-l*L(i*a)]}return o.invert=function(a,s){var l=r-s,h=St(i)*ot(a*a+l*l),u=rt(a,R(l))*St(l);return l*i<0&&(u-=G*St(a)*St(l)),[u/i,2*jt(Cn(r/h,1/i))-V]},o}function $a(){return Ei(Go).scale(109.5).parallels([30,30])}function jo(n,e){var t=L(n),i=n===e?x(n):(t-L(e))/(e-n),r=t/i+n;if(R(i)<w)return Pe;function o(a,s){var l=r-s,h=i*a;return[l*x(h),r-l*L(h)]}return o.invert=function(a,s){var l=r-s,h=rt(a,R(l))*St(l);return l*i<0&&(h-=G*St(a)*St(l)),[h/i,r-St(i)*ot(a*a+l*l)]},o}function Ja(){return Ei(jo).scale(131.154).center([0,13.9389])}function Ai(n,e){var t=L(e),i=L(n)*t;return[t*x(n)/i,x(e)/i]}function ts(){return Mt(Ai).scale(144.049).clipAngle(60)}function es(){var a,s,h,u,f,m,b,n=1,e=0,t=0,i=1,r=1,o=0,l=null,c=1,p=1,d=me({point:function(y,E){var D=v([y,E]);this.stream.point(D[0],D[1])}}),g=ve;function M(){return c=n*i,p=n*r,m=b=null,v}function v(y){var E=y[0]*c,D=y[1]*p;if(o){var W=D*a-E*s;E=E*a+D*s,D=W}return[E+e,D+t]}return v.invert=function(y){var E=y[0]-e,D=y[1]-t;if(o){var W=D*a+E*s;E=E*a-D*s,D=W}return[E/c,D/p]},v.stream=function(y){return m&&b===y?m:m=d(g(b=y))},v.postclip=function(y){return arguments.length?(g=y,l=h=u=f=null,M()):g},v.clipExtent=function(y){return arguments.length?(g=null==y?(l=h=u=f=null,ve):$e(l=+y[0][0],h=+y[0][1],u=+y[1][0],f=+y[1][1]),M()):null==l?null:[[l,h],[u,f]]},v.scale=function(y){return arguments.length?(n=+y,M()):n},v.translate=function(y){return arguments.length?(e=+y[0],t=+y[1],M()):[e,t]},v.angle=function(y){return arguments.length?(s=x(o=y%360*I),a=L(o),M()):o*B},v.reflectX=function(y){return arguments.length?(i=y?-1:1,M()):i<0},v.reflectY=function(y){return arguments.length?(r=y?-1:1,M()):r<0},v.fitExtent=function(y,E){return nn(v,y,E)},v.fitSize=function(y,E){return Xn(v,y,E)},v.fitWidth=function(y,E){return Qn(v,y,E)},v.fitHeight=function(y,E){return Un(v,y,E)},v}function Vi(n,e){return[Ae(En((V+e)/2)),-n]}function ns(){var n=$r(Vi),e=n.center,t=n.rotate;return n.center=function(i){return arguments.length?e([-i[1],i[0]]):[(i=e())[1],-i[0]]},n.rotate=function(i){return arguments.length?t([i[0],i[1],i.length>2?i[2]+90:90]):[(i=t())[0],i[1],i[2]-90]},t([0,0,90]).scale(159.155)}Ni.invert=Te(function(n){return n}),Ai.invert=Te(jt),Vi.invert=function(n,e){return[-e,2*jt(Fi(n))-V]}},7306:(Ne,Ut,O)=>{var Ct=O(54);function Ft(N,_,tt){_=_||1;for(var C,S,T,A,X=0;X<N[0].length;X++){var $=N[0][X];(!X||$[0]<C)&&(C=$[0]),(!X||$[1]<S)&&(S=$[1]),(!X||$[0]>T)&&(T=$[0]),(!X||$[1]>A)&&(A=$[1])}var w=T-C,it=A-S,G=Math.min(w,it),V=G/2;if(0===G){var Bt=[C,S];return Bt.distance=0,Bt}for(var Q=new Ct(void 0,Dt),B=C;B<T;B+=G)for(var I=S;I<A;I+=G)Q.push(new F(B+V,I+V,V,N));var R=function(N){for(var _=0,tt=0,C=0,S=N[0],T=0,A=S.length,X=A-1;T<A;X=T++){var $=S[T],w=S[X],it=$[0]*w[1]-w[0]*$[1];tt+=($[0]+w[0])*it,C+=($[1]+w[1])*it,_+=3*it}return 0===_?new F(S[0][0],S[0][1],0,N):new F(tt/_,C/_,0,N)}(N),jt=new F(C+w/2,S+it/2,0,N);jt.d>R.d&&(R=jt);for(var rt=Q.length;Q.length;){var L=Q.pop();L.d>R.d&&(R=L,tt&&console.log("found best %d after %d probes",Math.round(1e4*L.d)/1e4,rt)),!(L.max-R.d<=_)&&(Q.push(new F(L.x-(V=L.h/2),L.y-V,V,N)),Q.push(new F(L.x+V,L.y-V,V,N)),Q.push(new F(L.x-V,L.y+V,V,N)),Q.push(new F(L.x+V,L.y+V,V,N)),rt+=4)}tt&&(console.log("num probes: "+rt),console.log("best distance: "+R.d));var Wt=[R.x,R.y];return Wt.distance=R.d,Wt}function Dt(N,_){return _.max-N.max}function F(N,_,tt,C){this.x=N,this.y=_,this.h=tt,this.d=function(N,_,tt){for(var C=!1,S=1/0,T=0;T<tt.length;T++)for(var A=tt[T],X=0,$=A.length,w=$-1;X<$;w=X++){var it=A[X],G=A[w];it[1]>_!=G[1]>_&&N<(G[0]-it[0])*(_-it[1])/(G[1]-it[1])+it[0]&&(C=!C),S=Math.min(S,Gt(N,_,it,G))}return 0===S?0:(C?1:-1)*Math.sqrt(S)}(N,_,C),this.max=this.d+this.h*Math.SQRT2}function Gt(N,_,tt,C){var S=tt[0],T=tt[1],A=C[0]-S,X=C[1]-T;if(0!==A||0!==X){var $=((N-S)*A+(_-T)*X)/(A*A+X*X);$>1?(S=C[0],T=C[1]):$>0&&(S+=A*$,T+=X*$)}return(A=N-S)*A+(X=_-T)*X}Ct.default&&(Ct=Ct.default),Ne.exports=Ft,Ne.exports.default=Ft},54:(Ne,Ut,O)=>{O.r(Ut),O.d(Ut,{default:()=>Ct});class Ct{constructor(F=[],nt=Ft){if(this.data=F,this.length=this.data.length,this.compare=nt,this.length>0)for(let j=(this.length>>1)-1;j>=0;j--)this._down(j)}push(F){this.data.push(F),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const F=this.data[0],nt=this.data.pop();return this.length--,this.length>0&&(this.data[0]=nt,this._down(0)),F}peek(){return this.data[0]}_up(F){const{data:nt,compare:j}=this,Gt=nt[F];for(;F>0;){const N=F-1>>1,_=nt[N];if(j(Gt,_)>=0)break;nt[F]=_,F=N}nt[F]=Gt}_down(F){const{data:nt,compare:j}=this,Gt=this.length>>1,N=nt[F];for(;F<Gt;){let _=1+(F<<1),tt=nt[_];const C=_+1;if(C<this.length&&j(nt[C],tt)<0&&(_=C,tt=nt[C]),j(tt,N)>=0)break;nt[F]=tt,F=_}nt[F]=N}}function Ft(Dt,F){return Dt<F?-1:Dt>F?1:0}}}]);